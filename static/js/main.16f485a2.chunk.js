(this.webpackJsonpcovidcal=this.webpackJsonpcovidcal||[]).push([[0],{32:function(e,t,n){e.exports=n(46)},37:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a,o=n(2),c=n.n(o),s=n(16),r=n.n(s),i=(n(37),n(10)),u=n(7),l=n(12),m=n(31),d=n(28),v=n(29),p=n(15);!function(e){e.LastCloseContact="Most Recent Close Contact",e.SymptomsStart="Illness Onset",e.SymptomsEnd="Most Recent Symptoms",e.PositiveTest="Most Recent Positive Test"}(a||(a={}));var b=n(30),f=n(50),E=n(47),g=n(48),h=n(49),x=n(6);function y(e,t){var n=Object(x.flow)(Object(x.map)((function(e){var t=function(e){var t=[e.covidEvents[a.SymptomsStart],e.covidEvents[a.PositiveTest]],n=Object(x.flow)(x.compact,Object(x.map)((function(e){return Object(f.a)(e,"M/dd/yyyy",new Date)})),Object(x.thru)((function(e){return Object(E.a)(e)})))(t),o=n&&Object(h.a)(n,10),c=e.covidEvents[a.SymptomsEnd]?Object(f.a)(e.covidEvents[a.SymptomsEnd],"M/dd/yyyy",new Date):void 0,s=c&&Object(h.a)(c,1),r=Object(x.flow)(x.compact,Object(x.thru)((function(e){return Object(g.a)(e)})))([o,s]);return[n,r]}(e),n=Object(p.a)(t,2),o=n[0],c=n[1];return Object(b.a)(c)?{person:e,startDate:o,endDate:c,infected:!0}:{person:e,startDate:new Date,endDate:new Date,infected:!1}})),Object(x.partition)((function(e){return e.infected})))(e),o=Object(p.a)(n,2),c=o[0],s=o[1].map((function(e){var n=e.person,o=Object(x.filter)((function(e){return e.quarantinedPerson===n.id&&e.exposed}))(t),s=Object(x.map)((function(e){var t;return null===(t=c.find((function(t){return t.person.id===e.contagiousPerson})))||void 0===t?void 0:t.startDate})),r=Object(x.map)((function(e){var t;return e.ongoing?null===(t=c.find((function(t){return t.person.id===e.contagiousPerson})))||void 0===t?void 0:t.endDate:Object(f.a)(e.date,"M/dd/yyyy",new Date)})),u=n.covidEvents[a.LastCloseContact],l=u?Object(f.a)(u,"M/dd/yyyy",new Date):void 0,m=Object(E.a)(Object(x.compact)([].concat(Object(i.a)(s(o)),[l]))),d=Object(g.a)(Object(x.compact)([].concat(Object(i.a)(r(o)),[l]))),v=Object(h.a)(d,14);return{person:n,startDate:m,endDate:v,infected:!1}}));return[].concat(Object(i.a)(c),Object(i.a)(s))}var S=n(51);function j(e){var t=e.membersState.get(),n=e.selectingDateFieldState.get();return c.a.createElement("div",{className:"p-3"},c.a.createElement("div",{className:n?"ba bw2 b--light-yellow":""},c.a.createElement(m.a,{plugins:[d.a,v.a],initialView:"dayGridMonth",events:function(e,t){return y(e,t).map((function(e){return{classNames:["TODO"],title:e.person.name,start:e.startDate,end:e.endDate}}))}(t,e.inHouseExposureEvents),dateClick:function(t){if(e.editing>=0&&n){var a=e.membersState.findIndex((function(t){return t.get().id===e.editing}));a&&e.membersState[a].covidEvents[n].set(Object(S.a)(t.date,"MM/dd/yyyy"))}}})))}function O(e){var t=new RegExp("^([0-9][0-9]?/[0-9][0-9]?/)([0-9][0-9])$"),n=new RegExp("^[0-9][0-9]?/[0-9][0-9]?$");return c.a.createElement("div",{className:""},c.a.createElement("label",{htmlFor:"".concat(e.id,"-").concat(e.questionNumber)},"Date ",c.a.createElement("span",{className:"f6 fw3"},"mm/dd/yyyy")),c.a.createElement("input",{className:"form-control",value:e.questionFieldTextState.get(),name:e.questionFieldName,id:"".concat(e.id,"-").concat(e.questionNumber),type:"text",onChange:function(t){e.onChange(t)},onFocus:function(){e.onFocus(e.questionFieldName)},onBlur:function(){var a=e.questionFieldTextState.get();t.exec(a)&&(a=a.slice(0,-2)+"20"+a.slice(-2)),n.exec(a)&&(a+="/2020"),e.questionFieldTextState.set(a),e.onUnfocus(e.questionFieldName)}}))}function N(e){return c.a.createElement("div",{className:"custom-control custom-checkbox mb-3"},c.a.createElement("input",{className:"custom-control-input",checked:e.checked,id:"checkbox-".concat(e.id,"-").concat(e.questionText),type:"checkbox",onChange:e.onChange}),c.a.createElement("label",{className:"custom-control-label",htmlFor:"checkbox-".concat(e.id,"-").concat(e.questionText)},e.questionText))}function w(e){var t=e.inHouseExposureEventState.get(),n=t.exposed,a=t.ongoing;return c.a.createElement("div",{className:"mb-3"},c.a.createElement("div",{className:"custom-control custom-checkbox mb-3"},c.a.createElement("input",{className:"custom-control-input",checked:n,name:"crossExposure-".concat(e.index,"-checkbox-exposure"),id:"crossExposure-".concat(e.id,"-").concat(e.index,"-checkbox-exposure"),type:"checkbox",onChange:function(){return e.inHouseExposureEventState.exposed.set((function(e){return!e}))}}),c.a.createElement("label",{className:"custom-control-label",htmlFor:"crossExposure-".concat(e.id,"-").concat(e.index,"-checkbox-exposure")},"I was exposed to ",e.otherPerson.name)),n&&c.a.createElement("div",{className:"custom-control custom-checkbox mb-3"},c.a.createElement("input",{className:"custom-control-input",checked:a,name:"crossExposure-".concat(e.index,"-checkbox-ongoing"),id:"crossExposure-".concat(e.id,"-").concat(e.index,"-checkbox-ongoing"),type:"checkbox",onChange:function(){return e.inHouseExposureEventState.ongoing.set((function(e){return!e}))}}),c.a.createElement("label",{className:"custom-control-label",htmlFor:"crossExposure-".concat(e.id,"-").concat(e.index,"-checkbox-ongoing")},"My exposure to ",e.otherPerson.name," is ongoing")),n&&!a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{htmlFor:"crossExposure-".concat(e.id,"-").concat(e.index)},"Date exposed to ",e.otherPerson.name," ",c.a.createElement("span",{className:"f6 fw3"},"mm/dd/yyyy")),c.a.createElement("input",{className:"form-control",value:t.date,name:"crossExposure-".concat(e.index),id:"crossExposure-".concat(e.id,"-").concat(e.index),type:"text",onChange:function(t){return e.inHouseExposureEventState.date.set(t.target.value)}})))}function F(e){return c.a.createElement(c.a.Fragment,null,e.meaningfulInHouseExposures.map((function(t,n){var a=e.relevantInHouseExposureEventsState.find((function(e){var n=e.get();return n.quarantinedPerson===t.id||n.contagiousPerson===t.id}));return a?c.a.createElement(c.a.Fragment,null,c.a.createElement(w,{key:e.id+"-"+n,id:e.id,index:n,otherPerson:t,inHouseExposureEventState:a}),c.a.createElement("hr",null)):c.a.createElement(c.a.Fragment,null)})))}var P=n(25);function C(e){return Math.floor(Math.random()*Math.floor(e))}function D(e){return Boolean(e.covidEvents[a.PositiveTest]||e.covidEvents[a.SymptomsStart])}function k(e){var t=e.personState.get(),n=e.membersState.get(),o=e.personState.covidEvents,s=e.editingState.get(),r=e.inHouseExposureEventsState.filter((function(e){var n=e.get();return n.contagiousPerson===t.id||n.quarantinedPerson===t.id})),u=r.map((function(e){return e.get()})),m=Object(l.a)(Object.values(a).reduce((function(e,t){return e[t]=""!==o[t].get(),e}),{})),d=m.get(),v=d[a.PositiveTest]||d[a.SymptomsStart],b=function(n,s,r){return c.a.createElement("div",{className:"mb-3"},c.a.createElement(N,{id:t.id,questionText:r,checked:m[s].get(),onChange:function(e){var t=e.target.checked;if(m[s].set(t),s===a.PositiveTest){var n=Boolean(t||d[a.SymptomsStart]);v!==n&&E(n)}else if(s===a.SymptomsStart){var c=Boolean(t||d[a.PositiveTest]);v!==c&&E(c)}t||o[s].set("")}}),m[s].get()?c.a.createElement(O,{id:t.id,questionNumber:n,questionFieldTextState:o[s],questionFieldName:s,onChange:f,onFocus:function(){e.handleFocusDateField(s)},onUnfocus:function(){e.handleUnfocusDateField(s)}}):null,c.a.createElement("hr",null))},f=function(e){var t=e.target.name,n=e.target.value;o[t].set(n)};function E(a){r.map((function(e){return e.set(P.none)}));var o=n.map((function(e){var n=D(e);if(t!==e&&a!==n)return{contagiousPerson:a?t.id:e.id,quarantinedPerson:a?e.id:t.id,exposed:!0,ongoing:!0,date:""}}));e.inHouseExposureEventsState.merge(Object(x.compact)(o))}var g=n.filter((function(e){return t!==e&&v!==D(e)}));return c.a.createElement("div",{className:"card shadow-sm mb-2"},e.editingState.get()===t.id?c.a.createElement("div",{className:"p-2"},c.a.createElement("div",{className:"mb-3"},c.a.createElement("label",{htmlFor:"".concat(t.id,"-name")},"Name"),c.a.createElement("input",{className:"form-control",value:t.name,name:"name",id:"".concat(t.id,"-name"),type:"text",onChange:function(t){return e.personState.name.set(t.target.value)}})),b(1,a.LastCloseContact,"I have been exposed to someone covid positive (outside the household)"),b(2,a.PositiveTest,"I have received a positive test result"),b(2,a.SymptomsStart,"I have shown positive symptoms"),c.a.createElement(F,{id:t.id,meaningfulInHouseExposures:g,relevantInHouseExposureEventsState:r}),c.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},c.a.createElement("button",{className:"btn btn-secondary",onClick:function(){r.map((function(e){return e.set(P.none)})),e.membersState.set((function(t){return[].concat(Object(i.a)(t.slice(0,e.index)),Object(i.a)(t.slice(e.index+1)))})),e.editingState.set(-1)}},c.a.createElement("span",{className:"visually-hidden"},"Remove"),"Remove",c.a.createElement("i",{"aria-hidden":"true",className:"pl2 fas fa-times-circle white"})),c.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.editingState.set(-1)}},t.isNewPerson?"Submit":"Update"))):c.a.createElement("div",{className:"card-body"},c.a.createElement("h4",{className:"d-flex justify-content-between align-items-center mb-3"},c.a.createElement("span",null,t.name+" "),c.a.createElement("span",null,-1===s&&c.a.createElement("button",{onClick:function(){return e.editingState.set(t.id)}},c.a.createElement("span",{className:"visually-hidden"},"Edit Person"),c.a.createElement("span",{"aria-hidden":"true",className:"f5 fas fa-pen"})))),c.a.createElement("div",{className:""},Object.entries(t.covidEvents).map((function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];if(""!==a)return c.a.createElement("div",{className:"f5"},n,": "," ",a)})),Object.values(u).map((function(e){if(e.exposed){var t,a,o=null===(t=n.find((function(t){return t.id===e.quarantinedPerson})))||void 0===t?void 0:t.name,s=null===(a=n.find((function(t){return t.id===e.contagiousPerson})))||void 0===a?void 0:a.name;return e.ongoing?c.a.createElement("div",{className:"f5"},o," has an ongoing exposure to"," ",s," "):c.a.createElement("div",{className:"f5"},o," exposed to"," ",s," at ",e.date)}})))))}function q(e){var t=e.editingState.get(),n=e.membersState.get(),a=e.inHouseExposureEventsState.get();return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"p-3"},-1===t&&c.a.createElement("button",{className:"btn btn-primary mb-2",onClick:function(){e.handleAddNewPerson()}},c.a.createElement("i",{className:"fa fa-user-plus","aria-hidden":"true"})," Add Person"),e.membersState.map((function(t,n){var a=t.get().id;return c.a.createElement(k,{key:a,index:n,personState:t,membersState:e.membersState,inHouseExposureEventsState:e.inHouseExposureEventsState,editingState:e.editingState,handleFocusDateField:e.handleFocusDateField,handleUnfocusDateField:e.handleUnfocusDateField})})),c.a.createElement("hr",null),c.a.createElement("div",{className:"p-1"},c.a.createElement("h4",null,"Guidance"),y(n,a).map((function(e){if(Object(b.a)(e.startDate)&&Object(b.a)(e.endDate))return c.a.createElement("div",{className:"p32"},e.person.name," "," should quarantine from "," ",Object(S.a)(e.startDate,"MM/dd/yyyy")," until "," ",Object(S.a)(e.endDate,"MM/dd/yyyy"),".")})))))}function T(){var e,t,n=[{id:1,name:"Alice",covidEvents:(e={},Object(u.a)(e,a.LastCloseContact,"8/25/2020"),Object(u.a)(e,a.SymptomsStart,""),Object(u.a)(e,a.SymptomsEnd,""),Object(u.a)(e,a.PositiveTest,""),e),isNewPerson:!1,editing:!1},{id:2,name:"Bob",covidEvents:(t={},Object(u.a)(t,a.LastCloseContact,"8/28/2020"),Object(u.a)(t,a.SymptomsStart,""),Object(u.a)(t,a.SymptomsEnd,""),Object(u.a)(t,a.PositiveTest,""),t),isNewPerson:!1,editing:!1}],o=Object(l.a)(n),s=Object(l.a)([]),r=Object(l.a)(-1),m=Object(l.a)(o.length+1),d=Object(l.a)(void 0);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"navbar navbar-dark bg-dark shadow-sm"},c.a.createElement("div",{className:"container d-flex justify-content-between"},c.a.createElement("a",{href:"#",className:"navbar-brand d-flex align-items-center"},c.a.createElement("strong",null,"Covid Quarantine Calculator")),c.a.createElement("div",{className:"white f7 fw5"},"This page is a work in progress. Its instructions may be incorrect. Consult ",c.a.createElement("a",{href:"https://multco.us/novel-coronavirus-covid-19/if-you-have-been-around-someone-covid-19"},"the MultCo website")," or the latest CDC guildlines for accurate Covid information. "))),c.a.createElement("main",{className:"row"},c.a.createElement("div",{className:"col-md-5"},c.a.createElement(q,{membersState:o,inHouseExposureEventsState:s,editingState:r,handleAddNewPerson:function(){var e,t=m.get(),n={id:t,name:"Person ".concat(C(1e3)),covidEvents:(e={},Object(u.a)(e,a.LastCloseContact,""),Object(u.a)(e,a.SymptomsStart,""),Object(u.a)(e,a.SymptomsEnd,""),Object(u.a)(e,a.PositiveTest,""),e),isNewPerson:!0,editing:!0};m.set((function(e){return e+1})),o.set((function(e){return[].concat(Object(i.a)(e),[n])})),r.set(t),function(e){var t=o.get().map((function(t){if(D(t))return{contagiousPerson:t.id,quarantinedPerson:e.id,exposed:!0,ongoing:!0,date:""}}));s.merge(Object(x.compact)(t))}(n)},handleFocusDateField:function(e){d.set(e)},handleUnfocusDateField:function(e){d.set(void 0)}})),c.a.createElement("div",{className:"col-md-7"},c.a.createElement(j,{membersState:o,editing:r.get(),selectingDateFieldState:d,inHouseExposureEvents:s.get()}))))}var M=document.getElementById("root");r.a.render(c.a.createElement(T,null),M)}},[[32,1,2]]]);
//# sourceMappingURL=main.16f485a2.chunk.js.map