{"version":3,"sources":["types.ts","DateQuestion.tsx","MultipleChoiceQuestion.tsx","InHouseExposureQuestion.tsx","InHouseExposureQuestions.tsx","util.tsx","Person.tsx","calculator.ts","Household.tsx","GridView.tsx","Home.tsx","App.tsx","index.tsx"],"names":["CovidEventName","colors","DateQuestion","props","questionFieldText","questionFieldTextState","get","parsedDate","parse","Date","questionFieldDate","isValid","className","htmlFor","id","questionFieldName","selected","onChange","date","validDate","set","format","name","MultipleChoiceQuestion","checked","questionText","type","tooltip","aria-hidden","InHouseExposureQuestion","inHouseExposureEvent","inHouseExposureEventState","isExposed","exposed","isOngoing","ongoing","person","otherPerson","v","ongoingState","newOngoing","index","InHouseExposureQuestions","meaningfulInHouseExposures","map","relevantInHouseExposureEventsState","find","eventState","event","quarantinedPerson","contagiousPerson","key","isContagious","Boolean","covidEvents","PositiveTest","SymptomsStart","Person","personState","members","membersState","covidEventsState","editingPerson","editingPersonState","editingHousehold","editingHouseholdState","inHouseExposureEventsState","filter","relevantInHouseExposureEvents","e","selectionsState","useState","Object","values","reduce","selections","contagious","onCheckboxChange","fieldName","target","nextContagious","setContagiousState","buildCovidEventQuestion","reverse","none","newExposureEvents","otherContagious","dateMissing","dateInvalid","merge","compact","renderFeedback","entries","noSymptoms","LastCloseContact","renderFeedbackLine","noSymptomsFor24Hours","quarantinedPersonName","member","contagiousPersonName","ref","editingPersonRef","value","href","symptomsStart","c","buildSymptomsQuestion","guidance","endDate","infected","onClick","undefined","peopleWithOngoingExposureWithSymptoms","length","names","join","guidanceMessage","computeHouseHoldQuarantinePeriod","household","inHouseExposures","flow","isolationPeriod","covidPositiveEvents","illnessOnset","thru","dates","min","tenDaysAfterOnset","addDays","symptomsEnd","isolationEndDate","max","computeIsolationPeriod","startDate","partition","infectedGuidances","updatedQuarantinedGuidance","relevantInHouseExposures","normalize","infectedGuidance","infectionSource","normalizedInHouseExposures","exposures","outHouseExposureDateString","outHouseExposureDate","outHouseExposure","addOutsideExposures","earliestExposure","minBy","exposure","latestExposure","maxBy","personWithOngoingExposure","computeQuarantineGuidance","Household","useRef","addPersonRef","collapseEditingPerson","current","contains","addPerson","addNewPerson","useEffect","document","addEventListener","removeEventListener","style","display","flexWrap","backgroundColor","minHeight","height","showModalState","personGuidance","GridView","plugins","dayGridPlugin","interactionPlugin","initialView","events","inHouseExposureEvents","classNames","title","start","end","color","textColor","computeEvents","dateClick","info","Home","role","App","window","innerHeight","updateHeight","isOpen","overlay","zIndex","content","position","inset","padding","background","border","borderRadius","overflow","WebkitOverflowScrolling","outline","currentId","newPerson","Math","floor","random","isNewPerson","editing","rootElement","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.da589fc2.chunk.js","sourcesContent":["export interface PersonData {\n  id: number;\n  name: string;\n  covidEvents: CovidEvents;\n  noSymptomsFor24Hours: boolean;\n  isNewPerson: boolean;\n  editing: boolean;\n}\n\nexport enum CovidEventName {\n  LastCloseContact = \"Most Recent Close Contact\",\n  SymptomsStart = \"Illness Onset\",\n  PositiveTest = \"Most Recent Positive Test\"\n}\n\nexport type CovidEvents = {\n  [key in CovidEventName]: string;\n};\n\nexport interface InHouseExposure {\n  contagiousPerson: number;\n  quarantinedPerson: number;\n  exposed: boolean;\n  ongoing: boolean;\n  date: string;\n}\n\nexport interface Exposure {\n  startDate: Date;\n  endDate: Date;\n  infectionSource?: PersonData;\n}\n\nexport interface Guidance {\n  person: PersonData;\n  infected: boolean;\n  startDate?: Date;\n  endDate?: Date;\n  infectionSource?: PersonData;\n  peopleWithOngoingExposureWithSymptoms?: string[];\n}\n\nexport const colors = [\n  \"#b35806\",\n  \"#e08214\",\n  \"#fdb863\",\n  \"#fee0b6\",\n  \"#d8daeb\",\n  \"#b2abd2\",\n  \"#8073ac\",\n  \"#542788\"\n];\n","import React from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport { State } from \"@hookstate/core\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { parse, format, isValid } from \"date-fns\";\ninterface Props {\n  id: number;\n  questionFieldTextState: State<string>;\n  questionFieldName: string;\n}\n\nexport default function DateQuestion(props: Props) {\n  const questionFieldText = props.questionFieldTextState.get();\n  const parsedDate = parse(questionFieldText, \"M/dd/yyyy\", new Date());\n  const questionFieldDate = isValid(parsedDate) ? parsedDate : new Date();\n\n  return (\n    <div className=\"\">\n      <label htmlFor={`${props.id}-${props.questionFieldName}`}>\n        Date <span className=\"f6 fw3\">mm/dd/yyyy</span>\n      </label>\n      <DatePicker\n        className=\"form-control\"\n        selected={questionFieldDate}\n        onChange={(date: Date) => {\n          const validDate = isValid(date) ? date : new Date(); // Default to today\n          props.questionFieldTextState.set(format(validDate, \"MM/dd/yyyy\"));\n        }}\n        name={props.questionFieldName}\n        id={`${props.id}-${props.questionFieldName}`}\n      />\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { parse, format } from \"date-fns\";\nimport {\n  Disclosure,\n  DisclosureButton,\n  DisclosurePanel\n} from \"@reach/disclosure\";\n\ninterface Props {\n  id: number;\n  questionText: string;\n  checked: boolean;\n  onChange: (e: React.BaseSyntheticEvent) => void;\n  tooltip?: JSX.Element;\n}\n\nexport default function MultipleChoiceQuestion(props: Props) {\n  return (\n    <div className=\"custom-control custom-checkbox mb-3\">\n      <input\n        className=\"custom-control-input\"\n        checked={props.checked}\n        id={`checkbox-${props.id}-${props.questionText}`}\n        type=\"checkbox\"\n        onChange={props.onChange}\n      />\n      <Disclosure>\n        <label\n          className=\"custom-control-label\"\n          htmlFor={`checkbox-${props.id}-${props.questionText}`}\n        >\n          {props.questionText}\n          {props.tooltip && (\n            <DisclosureButton>\n              <i\n                aria-hidden=\"true\"\n                className=\"px-1 fas fa-question-circle link hover-dark-blue gray\"\n              ></i>\n            </DisclosureButton>\n          )}\n        </label>\n        {props.tooltip && (\n          <DisclosurePanel>\n            <div className=\"f5 gray\">{props.tooltip}</div>\n          </DisclosurePanel>\n        )}\n      </Disclosure>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { InHouseExposure, PersonData } from \"./types\";\nimport { State } from \"@hookstate/core\";\nimport MultipleChoiceQuestion from \"./MultipleChoiceQuestion\";\nimport DateQuestion from \"./DateQuestion\";\nimport { format } from \"date-fns\";\n\ninterface Props {\n  id: number;\n  index: number;\n  person: PersonData;\n  otherPerson: PersonData;\n  inHouseExposureEventState: State<InHouseExposure>;\n}\n\nexport default function InHouseExposureQuestion(props: Props) {\n  const inHouseExposureEvent = props.inHouseExposureEventState.get();\n  const isExposed = inHouseExposureEvent.exposed;\n  const isOngoing = inHouseExposureEvent.ongoing;\n  return (\n    <div className=\"mb-3\">\n      <MultipleChoiceQuestion\n        id={props.id}\n        questionText={`${props.person.name} had close contact with ${props.otherPerson.name}`}\n        checked={isExposed}\n        onChange={() => props.inHouseExposureEventState.exposed.set(v => !v)}\n      />\n      {isExposed && (\n        <MultipleChoiceQuestion\n          id={props.id}\n          questionText={`${props.person.name}'s close contact with ${props.otherPerson.name} is ongoing`}\n          checked={isOngoing}\n          onChange={() => {\n            const ongoingState = props.inHouseExposureEventState.ongoing;\n            const ongoing = ongoingState.get();\n            const newOngoing = !ongoing;\n            ongoingState.set(newOngoing);\n            if (newOngoing) {\n              props.inHouseExposureEventState.date.set(\"\");\n            } else {\n              props.inHouseExposureEventState.date.set(\n                format(new Date(), \"MM/dd/yyyy\")\n              );\n            }\n          }}\n        />\n      )}\n      {isExposed && !isOngoing && (\n        <DateQuestion\n          id={props.id}\n          questionFieldTextState={props.inHouseExposureEventState.date}\n          questionFieldName={`crossExposure-${props.index}`}\n        />\n      )}\n    </div>\n  );\n}\n","import { InHouseExposure, PersonData } from \"./types\";\nimport InHouseExposureQuestion from \"./InHouseExposureQuestion\";\nimport React from \"react\";\nimport { State } from \"@hookstate/core/dist\";\n\ninterface Props {\n  person: PersonData;\n  meaningfulInHouseExposures: PersonData[];\n  relevantInHouseExposureEventsState: State<InHouseExposure>[];\n}\n\nexport default function InHouseExposureQuestions(props: Props) {\n  return (\n    <>\n      {props.meaningfulInHouseExposures.map((otherPerson, index) => {\n        const inHouseExposureEventState = props.relevantInHouseExposureEventsState.find(\n          (eventState: State<InHouseExposure>) => {\n            const event = eventState.get();\n            return (\n              event.quarantinedPerson === otherPerson.id ||\n              event.contagiousPerson === otherPerson.id\n            );\n          }\n        );\n        if (inHouseExposureEventState) {\n          return (\n            <>\n              <hr />\n              <InHouseExposureQuestion\n                key={props.person.id + \"-\" + index}\n                id={props.person.id}\n                index={index}\n                person={props.person}\n                otherPerson={otherPerson}\n                inHouseExposureEventState={inHouseExposureEventState}\n              />\n            </>\n          );\n        } else {\n          return <></>;\n        }\n      })}\n    </>\n  );\n}\n","import { flow, remove, concat } from \"lodash/fp\";\nimport { CovidEventName, PersonData } from \"./types\";\n\nexport function replace<T>(array: Array<T>, old: T, updated: T): Array<T> {\n  return flow(\n    remove(e => e === old),\n    concat([updated])\n  )(array);\n}\n\nexport function getRandomInt(max: number) {\n  return Math.floor(Math.random() * Math.floor(max));\n}\n\nexport function isContagious(person: PersonData) {\n  return Boolean(\n    person.covidEvents[CovidEventName.PositiveTest] ||\n      person.covidEvents[CovidEventName.SymptomsStart]\n  );\n}\n","import React, { Ref } from \"react\";\nimport { useState, none, State } from \"@hookstate/core\";\nimport { CovidEventName, InHouseExposure, PersonData, Guidance } from \"./types\";\nimport DateQuestion from \"./DateQuestion\";\nimport MultipleChoiceQuestion from \"./MultipleChoiceQuestion\";\nimport InHouseExposureQuestions from \"./InHouseExposureQuestions\";\nimport { compact } from \"lodash/fp\";\nimport { isContagious } from \"./util\";\nimport { format } from \"date-fns\";\n\ninterface Props {\n  personState: State<PersonData>;\n  membersState: State<PersonData[]>;\n  inHouseExposureEventsState: State<InHouseExposure[]>;\n  editingHouseholdState: State<boolean>;\n  editingPersonState: State<number | undefined>;\n  guidance: Guidance;\n  editingPersonRef: Ref<HTMLDivElement>;\n}\n\nexport default function Person(props: Props) {\n  const person = props.personState.get();\n  const members = props.membersState.get();\n  const covidEventsState = props.personState.covidEvents;\n  const editingPerson = props.editingPersonState.get();\n  const editingHousehold = props.editingHouseholdState.get();\n  const relevantInHouseExposureEventsState: State<\n    InHouseExposure\n  >[] = props.inHouseExposureEventsState.filter(\n    (eventState: State<InHouseExposure>) => {\n      const event: InHouseExposure = eventState.get();\n      return (\n        event.contagiousPerson === person.id ||\n        event.quarantinedPerson === person.id\n      );\n    }\n  );\n  const relevantInHouseExposureEvents = relevantInHouseExposureEventsState.map(\n    e => e.get()\n  );\n  const selectionsState: any = useState(\n    Object.values(CovidEventName).reduce(\n      (selections: any, key: CovidEventName) => (\n        (selections[key] = covidEventsState[key].get() !== \"\"), selections\n      ),\n      {}\n    )\n  );\n  const selections = selectionsState.get();\n  const contagious =\n    selections[CovidEventName.PositiveTest] ||\n    selections[CovidEventName.SymptomsStart];\n\n  function onCheckboxChange(fieldName: CovidEventName) {\n    return (e: React.BaseSyntheticEvent) => {\n      const checked = e.target.checked;\n      selectionsState[fieldName].set(checked);\n      if (fieldName === CovidEventName.PositiveTest) {\n        const nextContagious = Boolean(\n          checked || selections[CovidEventName.SymptomsStart]\n        );\n        if (contagious !== nextContagious) {\n          setContagiousState(nextContagious);\n        }\n      } else if (fieldName === CovidEventName.SymptomsStart) {\n        const nextContagious = Boolean(\n          checked || selections[CovidEventName.PositiveTest]\n        );\n        if (contagious !== nextContagious) {\n          setContagiousState(nextContagious);\n        }\n      }\n      if (!checked) {\n        covidEventsState[fieldName].set(\"\");\n      } else {\n        covidEventsState[fieldName].set(format(new Date(), \"MM/dd/yyyy\"));\n      }\n    };\n  }\n\n  function buildCovidEventQuestion(\n    fieldName: CovidEventName,\n    questionText: string,\n    tooltip?: JSX.Element\n  ) {\n    return (\n      <>\n        <MultipleChoiceQuestion\n          id={person.id}\n          questionText={questionText}\n          checked={selectionsState[fieldName].get()}\n          onChange={onCheckboxChange(fieldName)}\n          tooltip={tooltip}\n        />\n        {selectionsState[fieldName].get() && (\n          <DateQuestion\n            id={person.id}\n            questionFieldTextState={covidEventsState[fieldName]}\n            questionFieldName={fieldName}\n          />\n        )}\n      </>\n    );\n  }\n\n  function buildSymptomsQuestion() {\n    const symptomsStartState = selectionsState[CovidEventName.SymptomsStart];\n    const symptomsStart = symptomsStartState.get();\n    return (\n      <>\n        <MultipleChoiceQuestion\n          id={person.id}\n          questionText={`${person.name} has shown positive symptoms`}\n          checked={symptomsStart}\n          onChange={onCheckboxChange(CovidEventName.SymptomsStart)}\n          tooltip={\n            <span>\n              Consult the{\" \"}\n              <a href=\"https://www.cdc.gov/coronavirus/2019-ncov/symptoms-testing/symptoms.html\">\n                CDC website\n              </a>{\" \"}\n              for a common list of symptoms of Covid.{\" \"}\n            </span>\n          }\n        />\n        {symptomsStart ? (\n          <DateQuestion\n            id={person.id}\n            questionFieldTextState={\n              covidEventsState[CovidEventName.SymptomsStart]\n            }\n            questionFieldName={CovidEventName.SymptomsStart}\n          />\n        ) : null}\n        <div className={\"mb-3\"} />\n        {symptomsStart ? (\n          <MultipleChoiceQuestion\n            id={person.id}\n            questionText={`${person.name}'s symptoms have been improved for 24 hours.`}\n            checked={props.personState.noSymptomsFor24Hours.get()}\n            onChange={() => props.personState.noSymptomsFor24Hours.set(c => !c)}\n            tooltip={\n              <span>\n                Improved symptoms are a requirement for you to end isolation. If\n                your symptoms improve AND you have had no fever for 24 hours\n                without the use of medicine, check this box.{\" \"}\n                <a href=\"https://multco.us/novel-coronavirus-covid-19/if-you-test-positive-covid-19\">\n                  Link.\n                </a>{\" \"}\n              </span>\n            }\n          />\n        ) : null}\n      </>\n    );\n  }\n\n  function setContagiousState(contagious: boolean) {\n    relevantInHouseExposureEventsState.reverse().map(e => e.set(none)); // Remove all current exposures\n    const newExposureEvents = members.map((otherPerson: PersonData) => {\n      const otherContagious = isContagious(otherPerson);\n      if (person !== otherPerson && contagious !== otherContagious) {\n        return {\n          contagiousPerson: contagious ? person.id : otherPerson.id,\n          quarantinedPerson: contagious ? otherPerson.id : person.id,\n          exposed: true,\n          ongoing: true,\n          date: \"\",\n          dateMissing: false,\n          dateInvalid: false\n        };\n      }\n    });\n    props.inHouseExposureEventsState.merge(compact(newExposureEvents));\n  }\n\n  const meaningfulInHouseExposures = members.filter(\n    (otherPerson: PersonData) =>\n      person !== otherPerson && contagious !== isContagious(otherPerson)\n  );\n\n  function removeFromMembers() {\n    relevantInHouseExposureEventsState.reverse().map(e => e.set(none)); // Remove all current exposures\n    props.personState.set(none);\n  }\n\n  function renderGuidance() {\n    if (editingHousehold) {\n      return null;\n    } else {\n      if (props.guidance.endDate) {\n        return props.guidance.infected ? \" - Isolate\" : \" - Quarantine\";\n      } else {\n        return null;\n      }\n    }\n  }\n\n  function guidanceMessage(guidance: Guidance) {\n    if (guidance.endDate) {\n      const date = format(guidance.endDate, \"PPPP\");\n      if (guidance.infected) {\n        if (guidance.person.noSymptomsFor24Hours) {\n          return (\n            <>\n              <p>Until {date}</p>\n              <p>\n                This is 10 days after the earliest known date of illness onset.\n              </p>\n            </>\n          );\n        } else {\n          return (\n            <>\n              <p>Until at least {date} and 24 hours after symptoms improve</p>\n              <p>\n                This is 10 days after the earliest known date of illness onset.\n              </p>\n            </>\n          );\n        }\n      } else {\n        if (guidance.peopleWithOngoingExposureWithSymptoms?.length) {\n          const names = guidance.peopleWithOngoingExposureWithSymptoms?.join(\n            \", \"\n          );\n          return (\n            <>\n              <p>\n                Until 14 days after isolation period ends for {names} (at least{\" \"}\n                {date})\n              </p>\n              <p>\n                Please come back when symptoms for {names} have improved for an\n                exact date.\n              </p>\n            </>\n          );\n        } else {\n          return (\n            <>\n              <p>Until {date}</p>\n              <p>This is 14 days after the last known exposure date.</p>\n            </>\n          );\n        }\n      }\n    }\n  }\n\n  function renderFeedbackLine(name: string, date: string, noSymptoms: boolean) {\n    switch (name) {\n      case CovidEventName.LastCloseContact:\n        return `Most recent close contact was on ${date}.`;\n      case CovidEventName.PositiveTest:\n        return `Earliest positive test was on ${date}.`;\n      case CovidEventName.SymptomsStart:\n        if (noSymptoms) {\n          return `Symptoms started showing on ${date}.`;\n        } else {\n          return `Symptoms started showing on ${date} and have not improved.`;\n        }\n      default:\n        return null;\n    }\n  }\n\n  function renderFeedback() {\n    return (\n      <div className=\"\">\n        {Object.entries(person.covidEvents).map(\n          ([name, date]: [string, string]) => {\n            if (date !== \"\") {\n              return (\n                <div className=\"f5\">\n                  {renderFeedbackLine(name, date, person.noSymptomsFor24Hours)}\n                </div>\n              );\n            }\n          }\n        )}\n        {Object.values(relevantInHouseExposureEvents).map(\n          (event: InHouseExposure) => {\n            if (event.exposed) {\n              const quarantinedPersonName = members.find(\n                member => member.id === event.quarantinedPerson\n              )?.name;\n              const contagiousPersonName = members.find(\n                member => member.id === event.contagiousPerson\n              )?.name;\n              if (event.ongoing) {\n                return (\n                  <div className=\"f5\">\n                    {quarantinedPersonName} has an ongoing exposure to{\" \"}\n                    {contagiousPersonName}.\n                  </div>\n                );\n              } else {\n                return (\n                  <div className=\"f5\">\n                    {quarantinedPersonName} exposed to {contagiousPersonName} at{\" \"}\n                    {event.date}.\n                  </div>\n                );\n              }\n            }\n          }\n        )}\n      </div>\n    );\n  }\n\n  function renderEditing() {\n    return (\n      <div className={\"card shadow-sm mb-2\"} ref={props.editingPersonRef}>\n        <div className=\"card-body\">\n          <div className=\"mb-3\">\n            <label htmlFor={`${person.id}-name`}>Name</label>\n            <input\n              className=\"form-control\"\n              value={person.name}\n              name=\"name\"\n              id={`${person.id}-name`}\n              type=\"text\"\n              onChange={(e: React.BaseSyntheticEvent) =>\n                props.personState.name.set(e.target.value)\n              }\n            />\n          </div>\n          <div className=\"mb-3\">\n            {buildCovidEventQuestion(\n              CovidEventName.LastCloseContact,\n              `${person.name} has had close contact to someone presumed covid positive (outside the household)`,\n              <div>\n                Close contact means any of the following:\n                <ul className=\"mx-3 mb-1\">\n                  <li>\n                    You were within 6 feet of them for a total of 15 minutes or\n                    more\n                  </li>\n                  <li>You provided care at home to the person</li>\n                  <li>\n                    You had direct physical contact with the person (hugged or\n                    kissed them)\n                  </li>\n                  <li>You shared eating or drinking utensils</li>\n                  <li>\n                    They sneezed, coughed, or somehow got respiratory droplets\n                    on you\n                  </li>\n                </ul>{\" \"}\n                <a href=\"https://www.cdc.gov/coronavirus/2019-ncov/if-you-are-sick/quarantine.html\">\n                  Link.\n                </a>\n              </div>\n            )}\n          </div>\n          <div className=\"mb-3\">\n            <hr />\n            {buildCovidEventQuestion(\n              CovidEventName.PositiveTest,\n              `${person.name} has received a positive test result`\n            )}\n          </div>\n          <div className=\"mb-3\">\n            <hr />\n            {buildSymptomsQuestion()}\n          </div>\n          <InHouseExposureQuestions\n            person={person}\n            meaningfulInHouseExposures={meaningfulInHouseExposures}\n            relevantInHouseExposureEventsState={\n              relevantInHouseExposureEventsState\n            }\n          />\n        </div>\n      </div>\n    );\n  }\n\n  function renderNonEditing() {\n    return (\n      <div className={\"card shadow-sm mb-2\"}>\n        <div className=\"card-body\">\n          <div className={\"\"}>\n            <h4 className=\"d-flex justify-content-between align-items-center\">\n              <span className=\"\">\n                {person.name + \"\"}\n                {renderGuidance()}\n              </span>\n              <span>\n                {!editingPerson && (\n                  <>\n                    <button\n                      onClick={() => {\n                        props.editingHouseholdState.set(true);\n                        props.editingPersonState.set(person.id);\n                      }}\n                    >\n                      <span className=\"visually-hidden\">Edit Person</span>\n                      <span aria-hidden=\"true\" className=\"f5 fas fa-pen\"></span>\n                    </button>\n                    <span className={\"mx-2\"} />\n                    <button\n                      onClick={() => {\n                        removeFromMembers();\n                        props.editingPersonState.set(undefined);\n                      }}\n                    >\n                      <span className=\"visually-hidden\">Remove</span>\n                      <span\n                        className=\"f5 fa fa-trash\"\n                        aria-hidden=\"true\"\n                      ></span>\n                    </button>\n                  </>\n                )}\n              </span>\n            </h4>\n            {!editingHousehold && guidanceMessage(props.guidance)}\n          </div>\n          <div className={\"my-3\"} />\n          {editingHousehold && renderFeedback()}\n        </div>\n      </div>\n    );\n  }\n\n  return editingPerson === person.id ? renderEditing() : renderNonEditing();\n}\n","import {\n  Guidance,\n  CovidEventName,\n  InHouseExposure,\n  PersonData,\n  Exposure\n} from \"./types\";\nimport { addDays, parse } from \"date-fns\";\nimport {\n  flow,\n  compact,\n  map,\n  thru,\n  partition,\n  filter,\n  max,\n  maxBy,\n  min,\n  minBy\n} from \"lodash/fp\";\n\nexport function computeHouseHoldQuarantinePeriod(\n  household: PersonData[],\n  inHouseExposures: InHouseExposure[]\n): Guidance[] {\n  const [infectedGuidances, quarantinedGuidances] = flow(\n    map((person: PersonData) => {\n      const isolationPeriod = computeIsolationPeriod(person);\n      if (isolationPeriod) {\n        const [startDate, endDate] = isolationPeriod;\n        return {\n          person: person,\n          infected: true,\n          startDate: startDate,\n          endDate: endDate\n        };\n      } else {\n        return {\n          person: person,\n          infected: false\n        };\n      }\n    }),\n    partition(c => c.infected)\n  )(household);\n  const updatedQuarantinedGuidance: Guidance[] = quarantinedGuidances.map(\n    guidance =>\n      computeQuarantineGuidance(guidance, inHouseExposures, infectedGuidances)\n  );\n  return [...infectedGuidances, ...updatedQuarantinedGuidance];\n}\n\nexport function computeIsolationPeriod(person: PersonData): Date[] | undefined {\n  const covidPositiveEvents = [\n    person.covidEvents[CovidEventName.SymptomsStart],\n    person.covidEvents[CovidEventName.PositiveTest]\n  ];\n  const illnessOnset = flow(\n    compact,\n    map((date: string) => parse(date, \"M/dd/yyyy\", new Date())),\n    thru((dates: Date[]) => min(dates))\n  )(covidPositiveEvents);\n  if (illnessOnset) {\n    const tenDaysAfterOnset = addDays(illnessOnset, 10);\n    const symptomsEnd = person.noSymptomsFor24Hours ? undefined : new Date(); // TODO: Rethink\n    const isolationEndDate = flow(\n      compact,\n      thru((dates: Date[]) => max(dates))\n    )([tenDaysAfterOnset, symptomsEnd]);\n    return [illnessOnset, isolationEndDate];\n  }\n}\n\nfunction computeQuarantineGuidance(\n  guidance: Guidance,\n  inHouseExposures: InHouseExposure[],\n  infectedGuidances: Guidance[]\n) {\n  const person = guidance.person;\n  const relevantInHouseExposures = filter(\n    (event: InHouseExposure) =>\n      event.quarantinedPerson === person.id && event.exposed\n  )(inHouseExposures);\n  const normalize = map((event: InHouseExposure) => {\n    const infectedGuidance = infectedGuidances.find(\n      guidance => guidance.person.id === event.contagiousPerson\n    ) as Guidance;\n    if (event.ongoing) {\n      return {\n        startDate: infectedGuidance.startDate as Date,\n        endDate: infectedGuidance.endDate as Date,\n        infectionSource: infectedGuidance.person\n      };\n    } else {\n      return {\n        startDate: infectedGuidance.startDate as Date,\n        endDate: parse(event.date, \"M/dd/yyyy\", new Date()),\n        infectionSource: infectedGuidance.person\n      };\n    }\n  });\n  const normalizedInHouseExposures = compact(\n    normalize(relevantInHouseExposures)\n  );\n  const exposures = addOutsideExposures(person, normalizedInHouseExposures);\n  const earliestExposure = minBy(exposure => exposure.startDate, exposures);\n  const latestExposure = maxBy(exposure => exposure.endDate, exposures);\n  let startDate = earliestExposure?.startDate;\n  let endDate = undefined;\n  if (latestExposure) {\n    endDate = addDays(latestExposure.endDate, 14);\n  }\n  const peopleWithOngoingExposureWithSymptoms = flow(\n    map((event: InHouseExposure) => {\n      if (event.ongoing) {\n        const personWithOngoingExposure = infectedGuidances.find(\n          guidance => guidance.person.id === event.contagiousPerson\n        )?.person;\n        if (!personWithOngoingExposure?.noSymptomsFor24Hours) {\n          return personWithOngoingExposure?.name;\n        }\n      }\n    }),\n    compact\n  )(relevantInHouseExposures);\n  return {\n    person: person,\n    infected: false,\n    startDate: startDate,\n    endDate: endDate,\n    infectionSource: latestExposure && latestExposure.infectionSource,\n    peopleWithOngoingExposureWithSymptoms: peopleWithOngoingExposureWithSymptoms\n  };\n}\n\nfunction addOutsideExposures(person: PersonData, exposures: Exposure[]) {\n  const outHouseExposureDateString =\n    person.covidEvents[CovidEventName.LastCloseContact];\n  if (outHouseExposureDateString) {\n    const outHouseExposureDate = parse(\n      outHouseExposureDateString,\n      \"M/dd/yyyy\",\n      new Date()\n    );\n    const outHouseExposure = {\n      startDate: outHouseExposureDate,\n      endDate: outHouseExposureDate,\n      infectionSource: undefined\n    };\n    exposures = [...exposures, outHouseExposure];\n  }\n  return exposures;\n}\n","import React, { useEffect, useRef } from \"react\";\nimport { InHouseExposure, PersonData } from \"./types\";\nimport Person from \"./Person\";\nimport { State } from \"@hookstate/core\";\nimport { computeHouseHoldQuarantinePeriod } from \"./calculator\";\n\ninterface Props {\n  addNewPerson: () => void;\n  membersState: State<PersonData[]>;\n  inHouseExposureEventsState: State<InHouseExposure[]>;\n  editingHouseholdState: State<boolean>;\n  editingPersonState: State<number | undefined>;\n  height: State<number>;\n  showModalState: State<boolean>;\n}\n\nexport default function Household(props: Props) {\n  const editingHousehold = props.editingHouseholdState.get();\n  const members = props.membersState.get();\n  const inHouseExposureEvents = props.inHouseExposureEventsState.get();\n  const guidance = computeHouseHoldQuarantinePeriod(\n    members,\n    inHouseExposureEvents\n  );\n\n  const editingPersonRef = useRef<HTMLDivElement>(null);\n  const addPersonRef = useRef<HTMLDivElement>(null);\n\n  function collapseEditingPerson(e: any) {\n    if (editingPersonRef.current?.contains(e.target)) {\n      // Within bounds of currently editing person\n    } else if (addPersonRef.current?.contains(e.target)) {\n      addPerson();\n    } else {\n      props.editingPersonState.set(undefined);\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", collapseEditingPerson);\n    return () => {\n      document.removeEventListener(\"mousedown\", collapseEditingPerson);\n    };\n  }, []);\n\n  function addPerson() {\n    props.editingHouseholdState.set(true);\n    props.addNewPerson();\n  }\n\n  function renderTitle() {\n    if (editingHousehold) {\n      return (\n        <>\n          <h2>Add your household</h2>\n          <p className=\"lead text-muted\">\n            Be sure to add everyone in your household.\n          </p>\n        </>\n      );\n    } else {\n      return (\n        <>\n          <h2>Our recommendation</h2>\n          <p className=\"lead text-muted\">\n            The guidance given in this app is based on the latest CDC guidelines\n            for protecting yourself and others from the spread of COVID-19. The\n            same information is available on their{\" \"}\n            <a href=\"https://www.cdc.gov/coronavirus/2019-ncov/if-you-are-sick/index.html\">\n              COVID-19 webpage\n            </a>\n            .\n          </p>\n        </>\n      );\n    }\n  }\n\n  function renderAction() {\n    if (editingHousehold) {\n      return (\n        <button\n          className=\"btn btn-primary my-3\"\n          onClick={() => props.editingHouseholdState.set(false)}\n        >\n          Get recommendation\n        </button>\n      );\n    } else {\n      return (\n        <button\n          className=\"btn btn-primary my-3\"\n          onClick={() => {\n            props.showModalState.set(false);\n          }}\n        >\n          See on calendar\n        </button>\n      );\n    }\n  }\n\n  return (\n    <>\n      <div\n        style={{\n          display: \"flex\",\n          flexWrap: \"wrap\"\n        }}\n      >\n        <div\n          className={\"col-md-6\"}\n          style={{\n            backgroundColor: \"#fff\",\n            minHeight: props.height.get() + \"px\"\n          }}\n        >\n          <header>\n            <div className=\"navbar household\">\n              <div className=\"container d-flex justify-content-between\">\n                <div />\n                <div\n                  className={\"my-2\"}\n                  onClick={() => {\n                    props.showModalState.set(false);\n                  }}\n                >\n                  Close\n                </div>\n              </div>\n            </div>\n          </header>\n          <div className={\"container\"}>\n            <div className={\"my-3\"} />\n            {renderTitle()}\n            <div>\n              {props.membersState.map((personState: State<PersonData>) => {\n                const person = personState.get();\n                const id = person.id;\n                const personGuidance = guidance.find(c => c.person.id === id);\n                if (personGuidance) {\n                  return (\n                    <Person\n                      key={id}\n                      personState={personState}\n                      membersState={props.membersState}\n                      inHouseExposureEventsState={\n                        props.inHouseExposureEventsState\n                      }\n                      editingHouseholdState={props.editingHouseholdState}\n                      editingPersonState={props.editingPersonState}\n                      guidance={personGuidance}\n                      editingPersonRef={editingPersonRef}\n                    />\n                  );\n                }\n              })}\n            </div>\n            <div\n              className={\"card shadow-sm mb-2\"}\n              onClick={addPerson}\n              ref={addPersonRef}\n            >\n              <button className={\"card-body\"}>\n                <h4 className={\"\"}>\n                  Add Person &nbsp;\n                  <i className=\"fa fa-user-plus\" aria-hidden=\"true\"></i>\n                </h4>\n              </button>\n            </div>\n            {renderAction()}\n          </div>\n        </div>\n        <div className={\"col-md-6\"} />\n      </div>\n    </>\n  );\n}\n","import React from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin, { DateClickArg } from \"@fullcalendar/interaction\";\nimport { computeHouseHoldQuarantinePeriod } from \"./calculator\";\nimport { colors } from \"./types\";\n\nimport { PersonData, Guidance, InHouseExposure } from \"./types\";\nimport { State } from \"@hookstate/core\";\nimport { compact, map, flow } from \"lodash/fp\";\n\ninterface Props {\n  membersState: State<PersonData[]>;\n  inHouseExposureEvents: InHouseExposure[];\n}\n\nexport default function GridView(props: Props) {\n  const members = props.membersState.get();\n  function computeEvents(\n    members: PersonData[],\n    inHouseExposureEvents: InHouseExposure[]\n  ) {\n    return flow(\n      map((guidance: Guidance) => {\n        if (guidance.endDate) {\n          return {\n            classNames: [\"TODO\"],\n            title: guidance.person.name,\n            start: guidance.startDate, // startDate is guaranteed if endDate exists\n            end: guidance.endDate,\n            color: colors[(guidance.person.id - 1) % colors.length],\n            textColor: \"#000000\"\n          };\n        }\n      }),\n      compact\n    )(computeHouseHoldQuarantinePeriod(members, inHouseExposureEvents));\n  }\n\n  return (\n    <div className={\"p-3\"}>\n      <div>\n        <FullCalendar\n          plugins={[dayGridPlugin, interactionPlugin]}\n          initialView=\"dayGridMonth\"\n          events={computeEvents(members, props.inHouseExposureEvents)}\n          dateClick={(info: DateClickArg) => {}}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport GridView from \"./GridView\";\nimport { InHouseExposure, PersonData } from \"./types\";\nimport { State } from \"@hookstate/core/dist\";\n\ninterface Props {\n  membersState: State<PersonData[]>;\n  inHouseExposureEventsState: State<InHouseExposure[]>;\n  showModalState: State<boolean>;\n}\n\nexport default function Home(props: Props) {\n  const members = props.membersState.get();\n\n  function renderTitle() {\n    if (members.length) {\n      return (\n        <>\n          <h1>Here is our recommendation for your household</h1>\n          <p className=\"lead text-muted\">\n            The guidance given in this app is based on the latest CDC guidelines\n            for protecting yourself and others from the spread of COVID-19. The\n            same information is available on their{\" \"}\n            <a href=\"https://www.cdc.gov/coronavirus/2019-ncov/if-you-are-sick/index.html\">\n              COVID-19 webpage\n            </a>\n            .\n          </p>\n          <p>\n            <div\n              className=\"btn btn-primary my-2\"\n              onClick={() => {\n                props.showModalState.set(true);\n              }}\n            >\n              Edit Answers\n            </div>\n          </p>\n        </>\n      );\n    } else {\n      return (\n        <>\n          <h1>Get quarantine and isolation guidance for your household</h1>\n          <p className=\"lead text-muted\">\n            We'll let you know who should quarantine or isolate, and for how\n            long.\n          </p>\n          <p>\n            <div\n              className=\"btn btn-primary my-2\"\n              onClick={() => {\n                props.showModalState.set(true);\n              }}\n            >\n              Get Started\n            </div>\n          </p>\n        </>\n      );\n    }\n  }\n\n  return (\n    <>\n      <header>\n        <div className=\"navbar\">\n          <div className=\"container d-flex justify-content-between\">\n            <div className=\"navbar-brand d-flex align-items-center\">\n              COVID Quarantine Calculator (Work in Progress)\n            </div>\n            <div>English</div>\n          </div>\n        </div>\n      </header>\n      <main className={\"main\"} role={\"main\"}>\n        <section className={\"jumbotron\"}>\n          <div className=\"container\">{renderTitle()}</div>\n        </section>\n      </main>\n      {members.length ? (\n        <GridView\n          membersState={props.membersState}\n          inHouseExposureEvents={props.inHouseExposureEventsState.get()}\n        />\n      ) : null}\n      <footer className={\"mb-3\"}>\n        <div className={\"container d-flex justify-content-between\"}>\n          <a href={\"https://www.codeforpdx.org/\"}>Code For PDX</a>\n          <a href=\"https://www.cdc.gov/coronavirus/2019-ncov/if-you-are-sick/isolation.html\">\n            CDC guidelines on isolation\n          </a>\n          <a href=\"https://www.cdc.gov/coronavirus/2019-ncov/if-you-are-sick/quarantine.html\">\n            CDC guidelines on quarantine\n          </a>\n        </div>\n      </footer>\n    </>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport { useState } from \"@hookstate/core\";\nimport Household from \"./Household\";\nimport Home from \"./Home\";\nimport { CovidEventName, InHouseExposure, PersonData } from \"./types\";\nimport { compact } from \"lodash/fp\";\nimport { getRandomInt, isContagious } from \"./util\";\nimport ReactModal from \"react-modal\";\n\nexport default function App() {\n  const height = useState(window.innerHeight);\n  const updateHeight = () => {\n    height.set(window.innerHeight);\n  };\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateHeight);\n    return () => window.removeEventListener(\"resize\", updateHeight);\n  }, []);\n  const members = useState([] as PersonData[]);\n  const inHouseExposureEvents = useState<InHouseExposure[]>([]);\n  const id = useState(members.length + 1);\n  const editingHouseholdState = useState(true);\n  const editingPersonState = useState<number | undefined>(undefined);\n  const showModalState = useState(false);\n\n  function addNewPerson() {\n    const currentId = id.get();\n    const newPerson = {\n      id: currentId,\n      name: `Person ${getRandomInt(1000)}`,\n      covidEvents: {\n        [CovidEventName.LastCloseContact]: \"\",\n        [CovidEventName.SymptomsStart]: \"\",\n        [CovidEventName.PositiveTest]: \"\"\n      },\n      noSymptomsFor24Hours: true,\n      isNewPerson: true,\n      editing: true\n    };\n    id.set(id => id + 1);\n    members.set(members => [...members, newPerson]);\n    editingPersonState.set(currentId);\n    const newExposureEvents = members.get().map((person: PersonData) => {\n      if (isContagious(person)) {\n        return {\n          contagiousPerson: person.id,\n          quarantinedPerson: newPerson.id,\n          exposed: true,\n          ongoing: true,\n          date: \"\",\n          dateMissing: false,\n          dateInvalid: false\n        };\n      }\n    });\n    inHouseExposureEvents.merge(compact(newExposureEvents));\n  }\n\n  return (\n    <>\n      <ReactModal\n        isOpen={showModalState.get()}\n        className={showModalState.get() ? \"slide-in\" : \"slide-out\"}\n        style={{\n          overlay: {\n            zIndex: 1\n          },\n          content: {\n            position: \"absolute\",\n            inset: \"0px\",\n            padding: \"0px\",\n            background: \"none\",\n            border: \"none\",\n            borderRadius: \"none\",\n            overflow: \"auto\",\n            WebkitOverflowScrolling: \"touch\",\n            outline: \"none\"\n          }\n        }}\n      >\n        <Household\n          addNewPerson={addNewPerson}\n          editingHouseholdState={editingHouseholdState}\n          editingPersonState={editingPersonState}\n          height={height}\n          inHouseExposureEventsState={inHouseExposureEvents}\n          membersState={members}\n          showModalState={showModalState}\n        />\n      </ReactModal>\n      <Home\n        membersState={members}\n        inHouseExposureEventsState={inHouseExposureEvents}\n        showModalState={showModalState}\n      />\n    </>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}