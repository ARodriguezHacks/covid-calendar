{"version":3,"sources":["types.ts","calculator.ts","GridView.tsx","DateQuestion.tsx","MultipleChoiceQuestion.tsx","InHouseExposureQuestion.tsx","InHouseExposureQuestions.tsx","util.tsx","Person.tsx","Household.tsx","App.tsx","index.tsx"],"names":["CovidEventName","colors","colorNames","computeHouseHoldQuarantinePeriod","household","inHouseExposureEvents","flow","map","person","covidPositiveEvents","covidEvents","SymptomsStart","PositiveTest","illnessOnset","compact","date","parse","Date","thru","dates","min","tenDaysAfterOnset","addDays","symptomsEnd","noSymptomsFor24Hours","undefined","isolationEndDate","max","computeIsolationPeriod","isValid","startDate","endDate","infected","partition","c","quarantinedCalculations","calculation","relevantInHouseExposureEvents","filter","event","quarantinedPerson","id","exposed","firstExposureDate","find","contagiousPerson","lastExposureDate","ongoing","outHouseExposureDateString","LastCloseContact","outHouseExposureDate","earliestExposureDate","latestExposureDate","fourteenDaysFromLastExposure","GridView","props","members","membersState","get","editingDateField","editingDateFieldState","className","plugins","dayGridPlugin","interactionPlugin","initialView","events","result","classNames","title","name","start","end","color","length","textColor","computeEvents","dateClick","info","editing","index","findIndex","memberState","set","format","DateQuestion","twoDigitYearPattern","RegExp","dayMonthPattern","htmlFor","questionFieldName","role","missing","invalid","value","questionFieldTextState","type","onChange","e","onFocus","onBlur","fixedDate","exec","slice","onUnfocus","MultipleChoiceQuestion","checked","questionText","tooltip","aria-hidden","InHouseExposureQuestion","inHouseExposureEvent","inHouseExposureEventState","isExposed","isOngoing","otherPerson","v","target","dateMissing","dateInvalid","InHouseExposureQuestions","meaningfulInHouseExposures","relevantInHouseExposureEventsState","eventState","key","getRandomInt","Math","floor","random","isContagious","Boolean","Person","personState","covidEventsState","editingState","inHouseExposureEventsState","selectionsState","useState","Object","values","reduce","selections","datePattern","datesInvalid","d","datesMissing","contagious","onCheckboxChange","fieldName","nextContagious","setContagiousState","buildCovidEventQuestion","handleChange","none","newExposureEvents","otherContagious","merge","href","symptomsStart","buildSymptomsQuestion","onClick","includes","isNewPerson","entries","quarantinedPersonName","member","contagiousPersonName","Household","addNewPerson","App","initialMembers","currentId","newPerson","rootElement","document","getElementById","ReactDOM","render"],"mappings":"yKASYA,E,0GAAAA,K,6CAAAA,E,8BAAAA,E,0CAAAA,M,KA2BL,IAAMC,EAAS,CACpB,UACA,UACA,UACA,WAEWC,EAAa,CACxB,iBACA,gBACA,kBACA,a,+CCrCK,SAASC,EACdC,EACAC,GACsB,IAAD,EACWC,eAC9BC,eAAI,SAACC,GAAwB,IAAD,EAsEzB,SAAgCA,GACrC,IAAMC,EAAsB,CAC1BD,EAAOE,YAAYV,EAAeW,eAClCH,EAAOE,YAAYV,EAAeY,eAE9BC,EAAeP,eACnBQ,UACAP,eAAI,SAACQ,GAAD,OAAkBC,YAAMD,EAAM,YAAa,IAAIE,SACnDC,gBAAK,SAACC,GAAD,OAAmBC,YAAID,MAHTb,CAInBG,GACIY,EAAoBR,GAAgBS,YAAQT,EAAc,IAC1DU,EAAcf,EAAOgB,0BAAuBC,EAAY,IAAIR,KAC5DS,EAAmBpB,eACvBQ,UACAI,gBAAK,SAACC,GAAD,OAAmBQ,YAAIR,MAFLb,CAGvB,CAACe,EAAmBE,IACtB,MAAO,CAACV,EAAca,GArFuBE,CAAuBpB,GADtC,mBACnBK,EADmB,KACLa,EADK,KAE1B,OAAIG,YAAQH,GACH,CACLlB,OAAQA,EACRsB,UAAWjB,EACXkB,QAASL,EACTM,UAAU,GAGL,CACLxB,OAAQA,EACRsB,UAAW,IAAIb,KACfc,QAAS,IAAId,KACbe,UAAU,MAIhBC,qBAAU,SAAAC,GAAC,OAAIA,EAAEF,YAnBa1B,CAoB9BF,GArBmB,mBACd4B,EADc,KAsBfG,EAtBe,KAsB4C5B,KAC/D,SAAA6B,GACE,IAAM5B,EAAS4B,EAAY5B,OACrB6B,EAAgCC,kBACpC,SAACC,GAAD,OACEA,EAAMC,oBAAsBhC,EAAOiC,IAAMF,EAAMG,UAFbJ,CAGpCjC,GACIsC,EAAoBpC,eAAI,SAACgC,GAAiC,IAAD,EAC7D,iBAAOP,EAASY,MACd,SAAAR,GAAW,OAAIA,EAAY5B,OAAOiC,KAAOF,EAAMM,2BADjD,aAAO,EAEJf,aAECgB,EAAmBvC,eAAI,SAACgC,GACR,IAAD,EAAnB,OAAIA,EAAMQ,QACR,UAAOf,EAASY,MACd,SAAAR,GAAW,OAAIA,EAAY5B,OAAOiC,KAAOF,EAAMM,2BADjD,aAAO,EAEJd,QAEIf,YAAMuB,EAAMxB,KAAM,YAAa,IAAIE,SAGxC+B,EACJxC,EAAOE,YAAYV,EAAeiD,kBAC9BC,EAAuBF,EACzBhC,YAAMgC,EAA4B,YAAa,IAAI/B,WACnDQ,EACE0B,EAAuB/B,YAC3BN,kBAAQ,GAAD,mBACF6B,EAAkBN,IADhB,CAELa,MAGEE,EAAqBzB,YACzBb,kBAAQ,GAAD,mBACFgC,EAAiBT,IADf,CAELa,MAGEG,EAA+B/B,YAAQ8B,EAAoB,IACjE,MAAO,CACL5C,OAAQA,EACRsB,UAAWqB,EACXpB,QAASsB,EACTrB,UAAU,MAIhB,MAAM,GAAN,mBAAWA,GAAX,YAAwBG,I,YC3DX,SAASmB,EAASC,GAC/B,IAAMC,EAAUD,EAAME,aAAaC,MAC7BC,EAAmBJ,EAAMK,sBAAsBF,MAmBrD,OACE,yBAAKG,UAAW,OAEZ,yBAAKA,UAAWF,EAAmB,yBAA2B,IAC5D,kBAAC,IAAD,CACEG,QAAS,CAACC,IAAeC,KACzBC,YAAY,eACZC,OAzBV,SACEV,EACAnD,GAEA,OAAOF,EAAiCqD,EAASnD,GAAuBE,KACtE,SAAC4D,GACC,MAAO,CACLC,WAAY,CAAC,QACbC,MAAOF,EAAO3D,OAAO8D,KACrBC,MAAOJ,EAAOrC,UACd0C,IAAKL,EAAOpC,QACZ0C,MAAOxE,EAAOkE,EAAO3D,OAAOiC,GAAM,EAAIxC,EAAOyE,QAC7CC,UAAW,cAaDC,CAAcpB,EAASD,EAAMlD,uBACrCwE,UAAW,SAACC,GACV,GAAIvB,EAAMwB,SAAWpB,EAAkB,CACrC,IAAMqB,EAAQzB,EAAME,aAAawB,WAC/B,SAAAC,GAAW,OAAIA,EAAYxB,MAAMjB,KAAOc,EAAMwB,WAEhDxB,EAAME,aAAauB,GAAOtE,YAAYiD,GAAkBwB,IACtDC,YAAON,EAAK/D,KAAM,qBC3CrB,SAASsE,EAAa9B,GACnC,IAAM+B,EAAsB,IAAIC,OAC9B,4CAEIC,EAAkB,IAAID,OAAO,6BAmBnC,OACE,yBAAK1B,UAAU,IACb,2BAAO4B,QAAO,UAAKlC,EAAMd,GAAX,YAAiBc,EAAMmC,oBAArC,QACO,0BAAM7B,UAAU,UAAhB,cACL,yBAAK8B,KAAK,SACPpC,EAAMqC,QACL,0BAAM/B,UAAU,cAAhB,YACEN,EAAMsC,QACR,0BAAMhC,UAAU,cAAhB,8BACE,OAGR,2BACEA,UAAU,eACViC,MAAOvC,EAAMwC,uBAAuBrC,MACpCY,KAAMf,EAAMmC,kBACZjD,GAAE,UAAKc,EAAMd,GAAX,YAAiBc,EAAMmC,mBACzBM,KAAK,OACLC,SAnCmB,SAACC,GACxB3C,EAAM0C,SAASC,IAmCXC,QAAS5C,EAAM4C,QACfC,OAjCgB,WACpB,IAAIC,EAAY9C,EAAMwC,uBAAuBrC,MACnB4B,EAAoBgB,KAAKD,KAEjDA,EAAYA,EAAUE,MAAM,GAAI,GAAK,KAAOF,EAAUE,OAAO,IAEzCf,EAAgBc,KAAKD,KAEzCA,GAAwB,SAE1B9C,EAAMwC,uBAAuBZ,IAAIkB,GACjC9C,EAAMiD,gB,YCnBK,SAASC,EAAuBlD,GAC7C,OACE,yBAAKM,UAAU,uCACb,2BACEA,UAAU,uBACV6C,QAASnD,EAAMmD,QACfjE,GAAE,mBAAcc,EAAMd,GAApB,YAA0Bc,EAAMoD,cAClCX,KAAK,WACLC,SAAU1C,EAAM0C,WAElB,kBAAC,IAAD,KACE,2BACEpC,UAAU,uBACV4B,QAAO,mBAAclC,EAAMd,GAApB,YAA0Bc,EAAMoD,eAEtCpD,EAAMoD,aACNpD,EAAMqD,SACL,kBAAC,IAAD,KACE,uBACEC,cAAY,OACZhD,UAAU,4DAKjBN,EAAMqD,SACL,kBAAC,IAAD,KACE,yBAAK/C,UAAU,WAAWN,EAAMqD,YC9B7B,SAASE,EAAwBvD,GAC9C,IAAMwD,EAAuBxD,EAAMyD,0BAA0BtD,MACvDuD,EAAYF,EAAqBrE,QACjCwE,EAAYH,EAAqBhE,QACvC,OACE,yBAAKc,UAAU,QACb,kBAAC4C,EAAD,CACEhE,GAAIc,EAAMd,GACVkE,aAAY,2BAAsBpD,EAAM4D,YAAY7C,MACpDoC,QAASO,EACThB,SAAU,kBAAM1C,EAAMyD,0BAA0BtE,QAAQyC,KAAI,SAAAiC,GAAC,OAAKA,QAEnEH,GACC,kBAACR,EAAD,CACEhE,GAAIc,EAAMd,GACVkE,aAAY,yBAAoBpD,EAAM4D,YAAY7C,KAAtC,eACZoC,QAASQ,EACTjB,SAAU,kBAAM1C,EAAMyD,0BAA0BjE,QAAQoC,KAAI,SAAAiC,GAAC,OAAKA,QAGrEH,IAAcC,GACb,kBAAC7B,EAAD,CACE5C,GAAIc,EAAMd,GACVsD,uBAAwBxC,EAAMyD,0BAA0BjG,KACxD2E,kBAAiB,wBAAmBnC,EAAMyB,OAC1CiB,SAAU,SAACC,GAAD,OACR3C,EAAMyD,0BAA0BjG,KAAKoE,IAAIe,EAAEmB,OAAOvB,QAEpDK,QAAS,aACTK,UAAW,aACXZ,QAASmB,EAAqBO,YAC9BzB,QAASkB,EAAqBQ,eCjCzB,SAASC,EAAyBjE,GAC/C,OACE,oCACGA,EAAMkE,2BAA2BlH,KAAI,SAAC4G,EAAanC,GAClD,IAAMgC,EAA4BzD,EAAMmE,mCAAmC9E,MACzE,SAAC+E,GACC,IAAMpF,EAAQoF,EAAWjE,MACzB,OACEnB,EAAMC,oBAAsB2E,EAAY1E,IACxCF,EAAMM,mBAAqBsE,EAAY1E,MAI7C,OAAIuE,EAEA,oCACE,kBAACF,EAAD,CACEc,IAAKrE,EAAMd,GAAK,IAAMuC,EACtBvC,GAAIc,EAAMd,GACVuC,MAAOA,EACPmC,YAAaA,EACbH,0BAA2BA,IAE7B,8BAIG,yCC5BV,SAASa,EAAalG,GAC3B,OAAOmG,KAAKC,MAAMD,KAAKE,SAAWF,KAAKC,MAAMpG,IAGxC,SAASsG,EAAazH,GAC3B,OAAO0H,QACL1H,EAAOE,YAAYV,EAAeY,eAChCJ,EAAOE,YAAYV,EAAeW,gBCMzB,SAASwH,EAAO5E,GAC7B,IAAM/C,EAAS+C,EAAM6E,YAAY1E,MAC3BF,EAAUD,EAAME,aAAaC,MAC7B2E,EAAmB9E,EAAM6E,YAAY1H,YACrCqE,EAAUxB,EAAM+E,aAAa5E,MAC7BgE,EAEAnE,EAAMgF,2BAA2BjG,QACrC,SAACqF,GACC,IAAMpF,EAA8BoF,EAAWjE,MAC/C,OACEnB,EAAMM,mBAAqBrC,EAAOiC,IAClCF,EAAMC,oBAAsBhC,EAAOiC,MAInCJ,EAAgCqF,EAAmCnH,KACvE,SAAA2F,GAAC,OAAIA,EAAExC,SAEH8E,EAAuBC,YAC3BC,OAAOC,OAAO3I,GAAgB4I,QAC5B,SAACC,EAAiBjB,GAAlB,OACGiB,EAAWjB,GAAuC,KAAhCS,EAAiBT,GAAKlE,MAAemF,IAE1D,KAGEC,EAAc,IAAIvD,OACtB,kDAEIwD,EAAoBN,YACxBC,OAAOC,OAAO3I,GAAgB4I,QAAO,SAACI,EAAQpB,GAC5C,OAAQoB,EAAEpB,IAAO,EAAQoB,IACxB,KAGCC,EAAoBR,YACxBC,OAAOC,OAAO3I,GAAgB4I,QAAO,SAACI,EAAQpB,GAC5C,OAAQoB,EAAEpB,IAAO,EAAQoB,IACxB,KAGCH,EAAaL,EAAgB9E,MAC7BwF,EACJL,EAAW7I,EAAeY,eAC1BiI,EAAW7I,EAAeW,eAE5B,SAASwI,EAAiBC,GACxB,OAAO,SAAClD,GACN,IAAMQ,EAAUR,EAAEmB,OAAOX,QAEzB,GADA8B,EAAgBY,GAAWjE,IAAIuB,GAC3B0C,IAAcpJ,EAAeY,aAAc,CAC7C,IAAMyI,EAAiBnB,QACrBxB,GAAWmC,EAAW7I,EAAeW,gBAEnCuI,IAAeG,GACjBC,EAAmBD,QAEhB,GAAID,IAAcpJ,EAAeW,cAAe,CACrD,IAAM0I,EAAiBnB,QACrBxB,GAAWmC,EAAW7I,EAAeY,eAEnCsI,IAAeG,GACjBC,EAAmBD,GAGlB3C,GACH2B,EAAiBe,GAAWjE,IAAI,KAKtC,SAASoE,EACPH,EACAzC,EACAC,GAEA,OACE,oCACE,kBAACH,EAAD,CACEhE,GAAIjC,EAAOiC,GACXkE,aAAcA,EACdD,QAAS8B,EAAgBY,GAAW1F,MACpCuC,SAAUkD,EAAiBC,GAC3BxC,QAASA,IAEV4B,EAAgBY,GAAW1F,OAC1B,kBAAC2B,EAAD,CACE5C,GAAIjC,EAAOiC,GACXsD,uBAAwBsC,EAAiBe,GACzC1D,kBAAmB0D,EACnBnD,SAAUuD,EACVrD,QAAS,kBAAM5C,EAAMK,sBAAsBuB,IAAIiE,IAC/C5C,UAAW,kBAAMjD,EAAMK,sBAAsBuB,SAAI1D,IACjDmE,QAASqD,EAAaG,GAAW1F,MACjCmC,QAASkD,EAAaK,GAAW1F,SAkE3C,IAAM8F,EAAe,SAACtD,GACpB,IAAM5B,EAAuB4B,EAAEmB,OAAO/C,KAChCwB,EAAgBI,EAAEmB,OAAOvB,MAC/BuC,EAAiB/D,GAAMa,IAAIW,IAkC7B,SAASwD,EAAmBJ,GAC1BxB,EAAmCnH,KAAI,SAAA2F,GAAC,OAAIA,EAAEf,IAAIsE,QAClD,IAAMC,EAAoBlG,EAAQjD,KAAI,SAAC4G,GACrC,IAAMwC,EAAkB1B,EAAad,GACrC,GAAI3G,IAAW2G,GAAe+B,IAAeS,EAC3C,MAAO,CACL9G,iBAAkBqG,EAAa1I,EAAOiC,GAAK0E,EAAY1E,GACvDD,kBAAmB0G,EAAa/B,EAAY1E,GAAKjC,EAAOiC,GACxDC,SAAS,EACTK,SAAS,EACThC,KAAM,GACNuG,aAAa,EACbC,aAAa,MAInBhE,EAAMgF,2BAA2BqB,MAAM9I,kBAAQ4I,IAGjD,IAAMjC,EAA6BjE,EAAQlB,QACzC,SAAC6E,GAAD,OACE3G,IAAW2G,GAAe+B,IAAejB,EAAad,MAQ1D,OACE,yBAAKtD,UAAW,uBACbN,EAAM+E,aAAa5E,QAAUlD,EAAOiC,GACnC,yBAAKoB,UAAU,OACb,yBAAKA,UAAU,QACb,2BAAO4B,QAAO,UAAKjF,EAAOiC,GAAZ,UAAd,QACA,2BACEoB,UAAU,eACViC,MAAOtF,EAAO8D,KACdA,KAAK,OACL7B,GAAE,UAAKjC,EAAOiC,GAAZ,SACFuD,KAAK,OACLC,SAAU,SAACC,GAAD,OACR3C,EAAM6E,YAAY9D,KAAKa,IAAIe,EAAEmB,OAAOvB,WAI1C,yBAAKjC,UAAU,QACZ0F,EACCvJ,EAAeiD,iBACf,sFACA,4cAOyD,IACvD,uBAAG4G,KAAK,yFAAR,WAKJ,8BAEF,yBAAKhG,UAAU,QACZ0F,EACCvJ,EAAeY,aACf,0CAEF,8BAEF,yBAAKiD,UAAU,QAxKvB,WACE,IACMiG,EADqBtB,EAAgBxI,EAAeW,eACjB+C,MACzC,OACE,oCACE,kBAAC+C,EAAD,CACEhE,GAAIjC,EAAOiC,GACXkE,aAAc,iCACdD,QAASoD,EACT7D,SAAUkD,EAAiBnJ,EAAeW,eAC1CiG,QACE,4CACc,IACZ,uBAAGiD,KAAK,4EAAR,gBAEK,IAJP,yCAKyC,OAI5CC,EACC,kBAACzE,EAAD,CACE5C,GAAIjC,EAAOiC,GACXsD,uBACEsC,EAAiBrI,EAAeW,eAElC+E,kBAAmB1F,EAAeW,cAClCsF,SAAUuD,EACVrD,QAAS,kBACP5C,EAAMK,sBAAsBuB,IAAInF,EAAeW,gBAEjD6F,UAAW,kBAAMjD,EAAMK,sBAAsBuB,SAAI1D,IACjDmE,QAASqD,EAAajJ,EAAeW,eAAe+C,MACpDmC,QAASkD,EAAa/I,EAAeW,eAAe+C,QAEpD,KACJ,yBAAKG,UAAW,SACfiG,EACC,kBAACrD,EAAD,CACEhE,GAAIjC,EAAOiC,GACXkE,aAAc,+CACdD,QAASnD,EAAM6E,YAAY5G,qBAAqBkC,MAChDuC,SAAU,kBAAM1C,EAAM6E,YAAY5G,qBAAqB2D,KAAI,SAAAjD,GAAC,OAAKA,MACjE0E,QACE,2MAG+C,IAC7C,uBAAGiD,KAAK,8EAAR,SAEK,OAIT,MAmHCE,GACD,8BAEF,kBAACvC,EAAD,CACE/E,GAAIjC,EAAOiC,GACXgF,2BAA4BA,EAC5BC,mCACEA,IAGJ,yBAAK7D,UAAW,qDACd,4BACEA,UAAU,oBACVmG,QAAS,WA7DnBtC,EAAmCnH,KAAI,SAAA2F,GAAC,OAAIA,EAAEf,IAAIsE,QAClDlG,EAAM6E,YAAYjD,IAAIsE,KA8DVlG,EAAM+E,aAAanD,SAAI1D,KAGzB,0BAAMoC,UAAU,mBAAhB,UAPF,SASE,uBACEgD,cAAY,OACZhD,UAAU,mCAGd,4BAAQA,UAAU,kBAAkBmG,QAlIzB,WACnBtB,OAAOC,OAAO3I,GAAgBO,KAAI,SAACqH,GACjCqB,EAAarB,GAAKzC,IAChBqD,EAAgB9E,MAAMkE,IAAwC,KAAhCS,EAAiBT,GAAKlE,OAEtDqF,EAAanB,GAAKzC,IAChBqD,EAAgB9E,MAAMkE,IACY,KAAhCS,EAAiBT,GAAKlE,QACrBwE,QAAQY,EAAYxC,KAAK+B,EAAiBT,GAAKlE,YAGtDH,EAAMgF,2BAA2BhI,KAAI,SAAC2F,GACpCA,EAAEoB,YAAYnC,KAAKe,EAAEnD,QAAQW,OAA0B,KAAjBwC,EAAEnF,KAAK2C,OAC7CwC,EAAEqB,YAAYpC,KACXe,EAAEnD,QAAQW,OACQ,KAAjBwC,EAAEnF,KAAK2C,QACNwE,QAAQY,EAAYxC,KAAKJ,EAAEnF,KAAK2C,YAIpCgF,OAAOC,OAAOM,EAAavF,OAAOuG,UAAS,IAC3CvB,OAAOC,OAAOI,EAAarF,OAAOuG,UAAS,IAC3C1G,EAAMgF,2BACJhI,KAAI,SAAC2F,GACJ,OAAOA,EAAEoB,YAAY5D,OAASwC,EAAEqB,YAAY7D,SAE7CuG,UAAS,IAEZ1G,EAAM+E,aAAanD,SAAI1D,KAuGdjB,EAAO0J,YAAc,SAAW,YAKvC,yBAAKrG,UAAU,aACb,wBAAIA,UAAU,0DACZ,0BACEA,UACE,eAAiB3D,EAAWM,EAAOiC,GAAM,EAAIvC,EAAWwE,SAGzDlE,EAAO8D,KAAO,KAEjB,+BACIS,GACA,4BAAQiF,QAAS,kBAAMzG,EAAM+E,aAAanD,IAAI3E,EAAOiC,MACnD,0BAAMoB,UAAU,mBAAhB,eACA,0BAAMgD,cAAY,OAAOhD,UAAU,qBAK3C,yBAAKA,UAAU,IACZ6E,OAAOyB,QAAQ3J,EAAOE,aAAaH,KAClC,YAAqC,IAAD,mBAAlC+D,EAAkC,KAA5BvD,EAA4B,KAClC,GAAa,KAATA,EACF,OACE,yBAAK8C,UAAU,MACZS,EACA,KAFH,IAEUvD,MAMjB2H,OAAOC,OAAOtG,GAA+B9B,KAC5C,SAACgC,GACC,GAAIA,EAAMG,QAAS,CAAC,IAAD,IACX0H,EAAqB,UAAG5G,EAAQZ,MACpC,SAAAyH,GAAM,OAAIA,EAAO5H,KAAOF,EAAMC,4BADL,aAAG,EAE3B8B,KACGgG,EAAoB,UAAG9G,EAAQZ,MACnC,SAAAyH,GAAM,OAAIA,EAAO5H,KAAOF,EAAMM,2BADN,aAAG,EAE1ByB,KACH,OAAI/B,EAAMQ,QAEN,yBAAKc,UAAU,MACZuG,EADH,8BACqD,IAClDE,EAAsB,KAKzB,yBAAKzG,UAAU,MACZuG,EADH,cACqC,IAClCE,EAFH,OAE6B/H,EAAMxB,aCpW1C,SAASwJ,EAAUhH,GAChC,IAAMwB,EAAUxB,EAAM+E,aAAa5E,MAC7BF,EAAUD,EAAME,aAAaC,MAC7BrD,EAAwBkD,EAAMgF,2BAA2B7E,MAC/D,OACE,oCACE,yBAAKG,UAAU,QACXkB,GACA,4BAAQlB,UAAU,uBAAuBmG,QAASzG,EAAMiH,cACtD,uBAAG3G,UAAU,kBAAkBgD,cAAY,SAD7C,eAIDtD,EAAME,aAAalD,KAAI,SAAC6H,GACvB,IACM3F,EADS2F,EAAY1E,MACTjB,GAClB,OACE,kBAAC0F,EAAD,CACEP,IAAKnF,EACL2F,YAAaA,EACb3E,aAAcF,EAAME,aACpB8E,2BAA4BhF,EAAMgF,2BAClCD,aAAc/E,EAAM+E,aACpB1E,sBAAuBL,EAAMK,2BAInC,6BACA,yBAAKC,UAAW,OACd,wCACC1D,EAAiCqD,EAASnD,GAAuBE,KAChE,SAAC4D,GACC,GAAItC,YAAQsC,EAAOrC,YAAcD,YAAQsC,EAAOpC,SAC9C,OACE,yBAAK8B,UAAU,OACZM,EAAO3D,OAAO8D,KADjB,IACwB,2BAA4B,IACjDc,YAAOjB,EAAOrC,UAAW,cACzB,UAHH,IAGesD,YAAOjB,EAAOpC,QAAS,cACnC,WCjDN,SAAS0I,IAAO,IAAD,IACtBC,EAA+B,CACnC,CACEjI,GAAI,EACJ6B,KAAK,QACL5D,aAAW,mBACRV,EAAeiD,iBAAmB,aAD1B,cAERjD,EAAeW,cAAgB,IAFvB,cAGRX,EAAeY,aAAe,IAHtB,GAKXY,sBAAsB,EACtB0I,aAAa,EACbnF,SAAS,GAEX,CACEtC,GAAI,EACJ6B,KAAK,MACL5D,aAAW,mBACRV,EAAeiD,iBAAmB,aAD1B,cAERjD,EAAeW,cAAgB,IAFvB,cAGRX,EAAeY,aAAe,IAHtB,GAKXY,sBAAsB,EACtB0I,aAAa,EACbnF,SAAS,IAGPvB,EAAUiF,YAASiC,GACnBrK,EAAwBoI,YAAiC,IACzD1D,EAAU0D,iBAA6BhH,GACvCgB,EAAKgG,YAASjF,EAAQkB,OAAS,GAC/Bf,EAAmB8E,iBAAqChH,GAmC9D,OACE,oCACE,yBAAKoC,UAAU,wCACb,yBAAKA,UAAU,4CACb,uBAAGgG,KAAK,IAAIhG,UAAU,0CACpB,gEAEF,yBAAKA,UAAU,gBAAf,8EAEU,IACR,uBAAGgG,KAAK,yFAAR,sBAEK,IALP,+DAM+D,OAInE,0BAAMhG,UAAW,OACf,yBAAKA,UAAW,YACd,kBAAC0G,EAAD,CACE9G,aAAcD,EACd+E,2BAA4BlI,EAC5BiI,aAAcvD,EACdnB,sBAAuBD,EACvB6G,aAzDV,WAAyB,IAAD,EAChBG,EAAYlI,EAAGiB,MACfkH,EAAY,CAChBnI,GAAIkI,EACJrG,KAAK,UAAD,OAAYuD,EAAa,MAC7BnH,aAAW,mBACRV,EAAeiD,iBAAmB,IAD1B,cAERjD,EAAeW,cAAgB,IAFvB,cAGRX,EAAeY,aAAe,IAHtB,GAKXY,sBAAsB,EACtB0I,aAAa,EACbnF,SAAS,GAEXtC,EAAG0C,KAAI,SAAA1C,GAAE,OAAIA,EAAK,KAClBe,EAAQ2B,KAAI,SAAA3B,GAAO,4BAAQA,GAAR,CAAiBoH,OACpC7F,EAAQI,IAAIwF,GACZ,IAAMjB,EAAoBlG,EAAQE,MAAMnD,KAAI,SAACC,GAC3C,GAAIyH,EAAazH,GACf,MAAO,CACLqC,iBAAkBrC,EAAOiC,GACzBD,kBAAmBoI,EAAUnI,GAC7BC,SAAS,EACTK,SAAS,EACThC,KAAM,GACNuG,aAAa,EACbC,aAAa,MAInBlH,EAAsBuJ,MAAM9I,kBAAQ4I,QA8BhC,yBAAK7F,UAAW,YACd,kBAACP,EAAD,CACEG,aAAcD,EACduB,QAASA,EAAQrB,MACjBE,sBAAuBD,EACvBtD,sBAAuBA,EAAsBqD,WCrGzD,IAAMmH,EAAcC,SAASC,eAAe,QAC5CC,IAASC,OAAO,kBAACR,EAAD,MAASI,K","file":"static/js/main.7ca32650.chunk.js","sourcesContent":["export interface PersonData {\n  id: number;\n  name: string;\n  covidEvents: CovidEvents;\n  noSymptomsFor24Hours: boolean;\n  isNewPerson: boolean;\n  editing: boolean;\n}\n\nexport enum CovidEventName {\n  LastCloseContact = \"Most Recent Close Contact\",\n  SymptomsStart = \"Illness Onset\",\n  PositiveTest = \"Most Recent Positive Test\"\n}\n\nexport type CovidEvents = {\n  [key in CovidEventName]: string;\n};\n\nexport interface InHouseExposureEvent {\n  contagiousPerson: number;\n  quarantinedPerson: number;\n  exposed: boolean;\n  ongoing: boolean;\n  date: string;\n  dateMissing: boolean;\n  dateInvalid: boolean;\n}\n\nexport interface CalculationResult {\n  person: PersonData;\n  startDate: Date;\n  endDate: Date;\n  infected?: boolean;\n}\n\nexport const colors = [\n  \"#91DADF\", // bg-light-green\",\n  \"#96CCFF\", // bg-light-blue\n  \"#A463F2\", // bg-light-purple\n  \"#FF6300\" // bg-orange\n];\nexport const colorNames = [\n  \"bg-light-green\",\n  \"bg-light-blue\",\n  \"bg-light-purple\",\n  \"bg-orange\"\n];\n","import {\n  CalculationResult,\n  CovidEventName,\n  InHouseExposureEvent,\n  PersonData\n} from \"./types\";\nimport { addDays, max, min, isValid, parse } from \"date-fns\";\nimport { flow, compact, map, thru, partition, filter } from \"lodash/fp\";\n\nexport function computeHouseHoldQuarantinePeriod(\n  household: PersonData[],\n  inHouseExposureEvents: InHouseExposureEvent[]\n): CalculationResult[] {\n  const [infected, quarantined] = flow(\n    map((person: PersonData) => {\n      const [illnessOnset, isolationEndDate] = computeIsolationPeriod(person);\n      if (isValid(isolationEndDate)) {\n        return {\n          person: person,\n          startDate: illnessOnset,\n          endDate: isolationEndDate,\n          infected: true\n        };\n      } else {\n        return {\n          person: person,\n          startDate: new Date(),\n          endDate: new Date(),\n          infected: false\n        };\n      }\n    }),\n    partition(c => c.infected)\n  )(household);\n  const quarantinedCalculations: CalculationResult[] = quarantined.map(\n    calculation => {\n      const person = calculation.person;\n      const relevantInHouseExposureEvents = filter(\n        (event: InHouseExposureEvent) =>\n          event.quarantinedPerson === person.id && event.exposed\n      )(inHouseExposureEvents);\n      const firstExposureDate = map((event: InHouseExposureEvent) => {\n        return infected.find(\n          calculation => calculation.person.id === event.contagiousPerson\n        )?.startDate;\n      });\n      const lastExposureDate = map((event: InHouseExposureEvent) => {\n        if (event.ongoing) {\n          return infected.find(\n            calculation => calculation.person.id === event.contagiousPerson\n          )?.endDate;\n        } else {\n          return parse(event.date, \"M/dd/yyyy\", new Date());\n        }\n      });\n      const outHouseExposureDateString =\n        person.covidEvents[CovidEventName.LastCloseContact];\n      const outHouseExposureDate = outHouseExposureDateString\n        ? parse(outHouseExposureDateString, \"M/dd/yyyy\", new Date())\n        : undefined;\n      const earliestExposureDate = min(\n        compact([\n          ...firstExposureDate(relevantInHouseExposureEvents),\n          outHouseExposureDate\n        ])\n      );\n      const latestExposureDate = max(\n        compact([\n          ...lastExposureDate(relevantInHouseExposureEvents),\n          outHouseExposureDate\n        ])\n      );\n      const fourteenDaysFromLastExposure = addDays(latestExposureDate, 14);\n      return {\n        person: person,\n        startDate: earliestExposureDate,\n        endDate: fourteenDaysFromLastExposure,\n        infected: false\n      };\n    }\n  );\n  return [...infected, ...quarantinedCalculations];\n}\n\nexport function computeIsolationPeriod(person: PersonData): [Date, Date] {\n  const covidPositiveEvents = [\n    person.covidEvents[CovidEventName.SymptomsStart],\n    person.covidEvents[CovidEventName.PositiveTest]\n  ];\n  const illnessOnset = flow(\n    compact,\n    map((date: string) => parse(date, \"M/dd/yyyy\", new Date())),\n    thru((dates: Date[]) => min(dates))\n  )(covidPositiveEvents);\n  const tenDaysAfterOnset = illnessOnset && addDays(illnessOnset, 10);\n  const symptomsEnd = person.noSymptomsFor24Hours ? undefined : new Date(); // TODO: Rethink\n  const isolationEndDate = flow(\n    compact,\n    thru((dates: Date[]) => max(dates))\n  )([tenDaysAfterOnset, symptomsEnd]);\n  return [illnessOnset, isolationEndDate];\n}\n","import React from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin, { DateClickArg } from \"@fullcalendar/interaction\";\nimport { computeHouseHoldQuarantinePeriod } from \"./calculator\";\nimport { colors } from \"./types\";\n\nimport {\n  PersonData,\n  CalculationResult,\n  InHouseExposureEvent,\n  CovidEventName\n} from \"./types\";\nimport { format } from \"date-fns\";\nimport { State } from \"@hookstate/core/dist\";\ninterface Props {\n  membersState: State<PersonData[]>;\n  inHouseExposureEvents: InHouseExposureEvent[];\n  editing: number | undefined;\n  editingDateFieldState: State<CovidEventName | undefined>;\n}\n\nexport default function GridView(props: Props) {\n  const members = props.membersState.get();\n  const editingDateField = props.editingDateFieldState.get();\n  function computeEvents(\n    members: PersonData[],\n    inHouseExposureEvents: InHouseExposureEvent[]\n  ) {\n    return computeHouseHoldQuarantinePeriod(members, inHouseExposureEvents).map(\n      (result: CalculationResult) => {\n        return {\n          classNames: [\"TODO\"],\n          title: result.person.name,\n          start: result.startDate,\n          end: result.endDate,\n          color: colors[result.person.id - (1 % colors.length)],\n          textColor: \"#000000\"\n        };\n      }\n    );\n  }\n\n  return (\n    <div className={\"p-3\"}>\n      {\n        <div className={editingDateField ? \"ba bw2 b--light-yellow\" : \"\"}>\n          <FullCalendar\n            plugins={[dayGridPlugin, interactionPlugin]}\n            initialView=\"dayGridMonth\"\n            events={computeEvents(members, props.inHouseExposureEvents)}\n            dateClick={(info: DateClickArg) => {\n              if (props.editing && editingDateField) {\n                const index = props.membersState.findIndex(\n                  memberState => memberState.get().id === props.editing\n                );\n                props.membersState[index].covidEvents[editingDateField].set(\n                  format(info.date, \"MM/dd/yyyy\")\n                );\n              }\n            }}\n          />\n        </div>\n      }\n    </div>\n  );\n}\n","import React from \"react\";\nimport { State } from \"@hookstate/core/dist\";\n\ninterface Props {\n  id: number;\n  questionFieldTextState: State<string>;\n  questionFieldName: string;\n  onChange: (e: React.BaseSyntheticEvent) => void;\n  onFocus: () => void;\n  onUnfocus: () => void;\n  missing: boolean;\n  invalid: boolean;\n}\n\nexport default function DateQuestion(props: Props) {\n  const twoDigitYearPattern = new RegExp(\n    \"^([0-9][0-9]?/[0-9][0-9]?/)([0-9][0-9])$\"\n  );\n  const dayMonthPattern = new RegExp(\"^[0-9][0-9]?/[0-9][0-9]?$\");\n\n  const handleTextChange = (e: React.BaseSyntheticEvent) => {\n    props.onChange(e);\n  };\n\n  const handleUnfocus = () => {\n    let fixedDate = props.questionFieldTextState.get();\n    const twoDigitYearMatch = twoDigitYearPattern.exec(fixedDate);\n    if (twoDigitYearMatch) {\n      fixedDate = fixedDate.slice(0, -2) + \"20\" + fixedDate.slice(-2);\n    }\n    const dayMonthMatch = dayMonthPattern.exec(fixedDate);\n    if (dayMonthMatch) {\n      fixedDate = fixedDate + \"/2020\";\n    }\n    props.questionFieldTextState.set(fixedDate);\n    props.onUnfocus();\n  };\n  return (\n    <div className=\"\">\n      <label htmlFor={`${props.id}-${props.questionFieldName}`}>\n        Date <span className=\"f6 fw3\">mm/dd/yyyy</span>\n        <div role=\"alert\">\n          {props.missing ? (\n            <span className=\"f5 fw5 red\">required</span>\n          ) : props.invalid ? (\n            <span className=\"f5 fw5 red\">mm/dd/yyyy format required</span>\n          ) : null}\n        </div>\n      </label>\n      <input\n        className=\"form-control\"\n        value={props.questionFieldTextState.get()}\n        name={props.questionFieldName}\n        id={`${props.id}-${props.questionFieldName}`}\n        type=\"text\"\n        onChange={handleTextChange}\n        onFocus={props.onFocus}\n        onBlur={handleUnfocus}\n      />\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { parse, format } from \"date-fns\";\nimport {\n  Disclosure,\n  DisclosureButton,\n  DisclosurePanel\n} from \"@reach/disclosure\";\n\ninterface Props {\n  id: number;\n  questionText: string;\n  checked: boolean;\n  onChange: (e: React.BaseSyntheticEvent) => void;\n  tooltip?: JSX.Element;\n}\n\nexport default function MultipleChoiceQuestion(props: Props) {\n  return (\n    <div className=\"custom-control custom-checkbox mb-3\">\n      <input\n        className=\"custom-control-input\"\n        checked={props.checked}\n        id={`checkbox-${props.id}-${props.questionText}`}\n        type=\"checkbox\"\n        onChange={props.onChange}\n      />\n      <Disclosure>\n        <label\n          className=\"custom-control-label\"\n          htmlFor={`checkbox-${props.id}-${props.questionText}`}\n        >\n          {props.questionText}\n          {props.tooltip && (\n            <DisclosureButton>\n              <i\n                aria-hidden=\"true\"\n                className=\"px-1 fas fa-question-circle link hover-dark-blue gray\"\n              ></i>\n            </DisclosureButton>\n          )}\n        </label>\n        {props.tooltip && (\n          <DisclosurePanel>\n            <div className=\"f5 gray\">{props.tooltip}</div>\n          </DisclosurePanel>\n        )}\n      </Disclosure>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { InHouseExposureEvent, PersonData } from \"./types\";\nimport { State } from \"@hookstate/core/dist\";\nimport MultipleChoiceQuestion from \"./MultipleChoiceQuestion\";\nimport DateQuestion from \"./DateQuestion\";\n\ninterface Props {\n  id: number;\n  index: number;\n  otherPerson: PersonData;\n  inHouseExposureEventState: State<InHouseExposureEvent>;\n}\n\nexport default function InHouseExposureQuestion(props: Props) {\n  const inHouseExposureEvent = props.inHouseExposureEventState.get();\n  const isExposed = inHouseExposureEvent.exposed;\n  const isOngoing = inHouseExposureEvent.ongoing;\n  return (\n    <div className=\"mb-3\">\n      <MultipleChoiceQuestion\n        id={props.id}\n        questionText={`I was exposed to ${props.otherPerson.name}`}\n        checked={isExposed}\n        onChange={() => props.inHouseExposureEventState.exposed.set(v => !v)}\n      />\n      {isExposed && (\n        <MultipleChoiceQuestion\n          id={props.id}\n          questionText={`My exposure to ${props.otherPerson.name} is ongoing`}\n          checked={isOngoing}\n          onChange={() => props.inHouseExposureEventState.ongoing.set(v => !v)}\n        />\n      )}\n      {isExposed && !isOngoing && (\n        <DateQuestion\n          id={props.id}\n          questionFieldTextState={props.inHouseExposureEventState.date}\n          questionFieldName={`crossExposure-${props.index}`}\n          onChange={(e: React.BaseSyntheticEvent) =>\n            props.inHouseExposureEventState.date.set(e.target.value)\n          }\n          onFocus={() => {}}\n          onUnfocus={() => {}}\n          missing={inHouseExposureEvent.dateMissing}\n          invalid={inHouseExposureEvent.dateInvalid}\n        />\n      )}\n    </div>\n  );\n}\n","import { InHouseExposureEvent, PersonData } from \"./types\";\nimport InHouseExposureQuestion from \"./InHouseExposureQuestion\";\nimport React from \"react\";\nimport { State } from \"@hookstate/core/dist\";\n\ninterface Props {\n  id: number;\n  meaningfulInHouseExposures: PersonData[];\n  relevantInHouseExposureEventsState: State<InHouseExposureEvent>[];\n}\n\nexport default function InHouseExposureQuestions(props: Props) {\n  return (\n    <>\n      {props.meaningfulInHouseExposures.map((otherPerson, index) => {\n        const inHouseExposureEventState = props.relevantInHouseExposureEventsState.find(\n          (eventState: State<InHouseExposureEvent>) => {\n            const event = eventState.get();\n            return (\n              event.quarantinedPerson === otherPerson.id ||\n              event.contagiousPerson === otherPerson.id\n            );\n          }\n        );\n        if (inHouseExposureEventState) {\n          return (\n            <>\n              <InHouseExposureQuestion\n                key={props.id + \"-\" + index}\n                id={props.id}\n                index={index}\n                otherPerson={otherPerson}\n                inHouseExposureEventState={inHouseExposureEventState}\n              />\n              <hr />\n            </>\n          );\n        } else {\n          return <></>;\n        }\n      })}\n    </>\n  );\n}\n","import { flow, remove, concat } from \"lodash/fp\";\nimport { CovidEventName, PersonData } from \"./types\";\n\nexport function replace<T>(array: Array<T>, old: T, updated: T): Array<T> {\n  return flow(\n    remove(e => e === old),\n    concat([updated])\n  )(array);\n}\n\nexport function getRandomInt(max: number) {\n  return Math.floor(Math.random() * Math.floor(max));\n}\n\nexport function isContagious(person: PersonData) {\n  return Boolean(\n    person.covidEvents[CovidEventName.PositiveTest] ||\n      person.covidEvents[CovidEventName.SymptomsStart]\n  );\n}\n","import React from \"react\";\nimport { useState, none, State } from \"@hookstate/core\";\n\nimport {\n  CovidEventName,\n  InHouseExposureEvent,\n  PersonData,\n  colorNames\n} from \"./types\";\nimport DateQuestion from \"./DateQuestion\";\nimport MultipleChoiceQuestion from \"./MultipleChoiceQuestion\";\nimport InHouseExposureQuestions from \"./InHouseExposureQuestions\";\nimport { compact } from \"lodash/fp\";\nimport { isContagious } from \"./util\";\n\ninterface Props {\n  personState: State<PersonData>;\n  membersState: State<PersonData[]>;\n  inHouseExposureEventsState: State<InHouseExposureEvent[]>;\n  editingState: State<number | undefined>;\n  editingDateFieldState: State<CovidEventName | undefined>;\n}\n\nexport default function Person(props: Props) {\n  const person = props.personState.get();\n  const members = props.membersState.get();\n  const covidEventsState = props.personState.covidEvents;\n  const editing = props.editingState.get();\n  const relevantInHouseExposureEventsState: State<\n    InHouseExposureEvent\n  >[] = props.inHouseExposureEventsState.filter(\n    (eventState: State<InHouseExposureEvent>) => {\n      const event: InHouseExposureEvent = eventState.get();\n      return (\n        event.contagiousPerson === person.id ||\n        event.quarantinedPerson === person.id\n      );\n    }\n  );\n  const relevantInHouseExposureEvents = relevantInHouseExposureEventsState.map(\n    e => e.get()\n  );\n  const selectionsState: any = useState(\n    Object.values(CovidEventName).reduce(\n      (selections: any, key: CovidEventName) => (\n        (selections[key] = covidEventsState[key].get() !== \"\"), selections\n      ),\n      {}\n    )\n  );\n  const datePattern = new RegExp(\n    \"^[0-9][0-9]?/[0-9][0-9]?/[0-9][0-9][0-9][0-9]$\"\n  );\n  const datesInvalid: any = useState(\n    Object.values(CovidEventName).reduce((d: any, key: CovidEventName) => {\n      return (d[key] = false), d;\n    }, {})\n  );\n\n  const datesMissing: any = useState(\n    Object.values(CovidEventName).reduce((d: any, key: CovidEventName) => {\n      return (d[key] = false), d;\n    }, {})\n  );\n\n  const selections = selectionsState.get();\n  const contagious =\n    selections[CovidEventName.PositiveTest] ||\n    selections[CovidEventName.SymptomsStart];\n\n  function onCheckboxChange(fieldName: CovidEventName) {\n    return (e: React.BaseSyntheticEvent) => {\n      const checked = e.target.checked;\n      selectionsState[fieldName].set(checked);\n      if (fieldName === CovidEventName.PositiveTest) {\n        const nextContagious = Boolean(\n          checked || selections[CovidEventName.SymptomsStart]\n        );\n        if (contagious !== nextContagious) {\n          setContagiousState(nextContagious);\n        }\n      } else if (fieldName === CovidEventName.SymptomsStart) {\n        const nextContagious = Boolean(\n          checked || selections[CovidEventName.PositiveTest]\n        );\n        if (contagious !== nextContagious) {\n          setContagiousState(nextContagious);\n        }\n      }\n      if (!checked) {\n        covidEventsState[fieldName].set(\"\");\n      }\n    };\n  }\n\n  function buildCovidEventQuestion(\n    fieldName: CovidEventName,\n    questionText: string,\n    tooltip?: JSX.Element\n  ) {\n    return (\n      <>\n        <MultipleChoiceQuestion\n          id={person.id}\n          questionText={questionText}\n          checked={selectionsState[fieldName].get()}\n          onChange={onCheckboxChange(fieldName)}\n          tooltip={tooltip}\n        />\n        {selectionsState[fieldName].get() && (\n          <DateQuestion\n            id={person.id}\n            questionFieldTextState={covidEventsState[fieldName]}\n            questionFieldName={fieldName}\n            onChange={handleChange}\n            onFocus={() => props.editingDateFieldState.set(fieldName)}\n            onUnfocus={() => props.editingDateFieldState.set(undefined)}\n            missing={datesMissing[fieldName].get()}\n            invalid={datesInvalid[fieldName].get()}\n          />\n        )}\n      </>\n    );\n  }\n\n  function buildSymptomsQuestion() {\n    const symptomsStartState = selectionsState[CovidEventName.SymptomsStart];\n    const symptomsStart = symptomsStartState.get();\n    return (\n      <>\n        <MultipleChoiceQuestion\n          id={person.id}\n          questionText={\"I have shown positive symptoms\"}\n          checked={symptomsStart}\n          onChange={onCheckboxChange(CovidEventName.SymptomsStart)}\n          tooltip={\n            <span>\n              Consult the{\" \"}\n              <a href=\"https://www.cdc.gov/coronavirus/2019-ncov/symptoms-testing/symptoms.html\">\n                CDC web site\n              </a>{\" \"}\n              for a common list of symptoms of Covid{\" \"}\n            </span>\n          }\n        />\n        {symptomsStart ? (\n          <DateQuestion\n            id={person.id}\n            questionFieldTextState={\n              covidEventsState[CovidEventName.SymptomsStart]\n            }\n            questionFieldName={CovidEventName.SymptomsStart}\n            onChange={handleChange}\n            onFocus={() =>\n              props.editingDateFieldState.set(CovidEventName.SymptomsStart)\n            }\n            onUnfocus={() => props.editingDateFieldState.set(undefined)}\n            missing={datesMissing[CovidEventName.SymptomsStart].get()}\n            invalid={datesInvalid[CovidEventName.SymptomsStart].get()}\n          />\n        ) : null}\n        <div className={\"mb-3\"} />\n        {symptomsStart ? (\n          <MultipleChoiceQuestion\n            id={person.id}\n            questionText={\"My symptoms have been improved for 24 hours.\"}\n            checked={props.personState.noSymptomsFor24Hours.get()}\n            onChange={() => props.personState.noSymptomsFor24Hours.set(c => !c)}\n            tooltip={\n              <span>\n                Improved symptoms are a requirement for you to end isolation. If\n                your symptoms improve AND you have had no fever for 24 hours\n                without the use of medicine, check this box.{\" \"}\n                <a href=\"https://multco.us/novel-coronavirus-covid-19/if-you-test-positive-covid-19\">\n                  Link.\n                </a>{\" \"}\n              </span>\n            }\n          />\n        ) : null}\n      </>\n    );\n  }\n\n  const handleChange = (e: React.BaseSyntheticEvent) => {\n    const name: CovidEventName = e.target.name;\n    const value: string = e.target.value;\n    covidEventsState[name].set(value);\n  };\n  const handleSubmit = () => {\n    Object.values(CovidEventName).map((key: CovidEventName) => {\n      datesMissing[key].set(\n        selectionsState.get()[key] && covidEventsState[key].get() === \"\"\n      );\n      datesInvalid[key].set(\n        selectionsState.get()[key] &&\n          covidEventsState[key].get() !== \"\" &&\n          !Boolean(datePattern.exec(covidEventsState[key].get()))\n      );\n    });\n    props.inHouseExposureEventsState.map((e: State<InHouseExposureEvent>) => {\n      e.dateMissing.set(!e.ongoing.get() && e.date.get() === \"\");\n      e.dateInvalid.set(\n        !e.ongoing.get() &&\n          e.date.get() !== \"\" &&\n          !Boolean(datePattern.exec(e.date.get()))\n      );\n    });\n    if (\n      !Object.values(datesMissing.get()).includes(true) &&\n      !Object.values(datesInvalid.get()).includes(true) &&\n      !props.inHouseExposureEventsState\n        .map((e: State<InHouseExposureEvent>) => {\n          return e.dateMissing.get() || e.dateInvalid.get();\n        })\n        .includes(true)\n    ) {\n      props.editingState.set(undefined);\n    }\n  };\n\n  function setContagiousState(contagious: boolean) {\n    relevantInHouseExposureEventsState.map(e => e.set(none)); // Remove all current exposures\n    const newExposureEvents = members.map((otherPerson: PersonData) => {\n      const otherContagious = isContagious(otherPerson);\n      if (person !== otherPerson && contagious !== otherContagious) {\n        return {\n          contagiousPerson: contagious ? person.id : otherPerson.id,\n          quarantinedPerson: contagious ? otherPerson.id : person.id,\n          exposed: true,\n          ongoing: true,\n          date: \"\",\n          dateMissing: false,\n          dateInvalid: false\n        };\n      }\n    });\n    props.inHouseExposureEventsState.merge(compact(newExposureEvents));\n  }\n\n  const meaningfulInHouseExposures = members.filter(\n    (otherPerson: PersonData) =>\n      person !== otherPerson && contagious !== isContagious(otherPerson)\n  );\n\n  function removeFromMembers() {\n    relevantInHouseExposureEventsState.map(e => e.set(none)); // Remove all current exposures\n    props.personState.set(none);\n  }\n\n  return (\n    <div className={\"card shadow-sm mb-2\"}>\n      {props.editingState.get() === person.id ? (\n        <div className=\"p-2\">\n          <div className=\"mb-3\">\n            <label htmlFor={`${person.id}-name`}>Name</label>\n            <input\n              className=\"form-control\"\n              value={person.name}\n              name=\"name\"\n              id={`${person.id}-name`}\n              type=\"text\"\n              onChange={(e: React.BaseSyntheticEvent) =>\n                props.personState.name.set(e.target.value)\n              }\n            />\n          </div>\n          <div className=\"mb-3\">\n            {buildCovidEventQuestion(\n              CovidEventName.LastCloseContact,\n              \"I have had close contact to someone presumed covid positive (outside the household)\",\n              <div>\n                Someone is presumed covid positive if they show symptoms or have\n                tested positive for the virus. Close contact means spending at\n                least 15 minutes or more at one time within 6 feet of someone,\n                with or without a face covering. If you have been exposed to\n                someone presumed covid positive, you are at a higher risk of\n                getting sick and spreading the disease to others, and should\n                quarantine for 14 days following the date of exposure.{\" \"}\n                <a href=\"https://multco.us/novel-coronavirus-covid-19/if-you-have-been-around-someone-covid-19\">\n                  Link.\n                </a>\n              </div>\n            )}\n            <hr />\n          </div>\n          <div className=\"mb-3\">\n            {buildCovidEventQuestion(\n              CovidEventName.PositiveTest,\n              \"I have received a positive test result\"\n            )}\n            <hr />\n          </div>\n          <div className=\"mb-3\">\n            {buildSymptomsQuestion()}\n            <hr />\n          </div>\n          <InHouseExposureQuestions\n            id={person.id}\n            meaningfulInHouseExposures={meaningfulInHouseExposures}\n            relevantInHouseExposureEventsState={\n              relevantInHouseExposureEventsState\n            }\n          />\n          <div className={\"d-flex justify-content-between align-items-center\"}>\n            <button\n              className=\"btn btn-secondary\"\n              onClick={() => {\n                removeFromMembers();\n                props.editingState.set(undefined);\n              }}\n            >\n              <span className=\"visually-hidden\">Remove</span>\n              Remove\n              <i\n                aria-hidden=\"true\"\n                className=\"pl2 fas fa-times-circle white\"\n              ></i>\n            </button>\n            <button className=\"btn btn-primary\" onClick={handleSubmit}>\n              {person.isNewPerson ? \"Submit\" : \"Update\"}\n            </button>\n          </div>\n        </div>\n      ) : (\n        <div className=\"card-body\">\n          <h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n            <span\n              className={\n                \"pv1 ph2 br3 \" + colorNames[person.id - (1 % colorNames.length)]\n              }\n            >\n              {person.name + \" \"}\n            </span>\n            <span>\n              {!editing && (\n                <button onClick={() => props.editingState.set(person.id)}>\n                  <span className=\"visually-hidden\">Edit Person</span>\n                  <span aria-hidden=\"true\" className=\"f5 fas fa-pen\"></span>\n                </button>\n              )}\n            </span>\n          </h4>\n          <div className=\"\">\n            {Object.entries(person.covidEvents).map(\n              ([name, date]: [string, string]) => {\n                if (date !== \"\") {\n                  return (\n                    <div className=\"f5\">\n                      {name}\n                      {\": \"} {date}\n                    </div>\n                  );\n                }\n              }\n            )}\n            {Object.values(relevantInHouseExposureEvents).map(\n              (event: InHouseExposureEvent) => {\n                if (event.exposed) {\n                  const quarantinedPersonName = members.find(\n                    member => member.id === event.quarantinedPerson\n                  )?.name;\n                  const contagiousPersonName = members.find(\n                    member => member.id === event.contagiousPerson\n                  )?.name;\n                  if (event.ongoing) {\n                    return (\n                      <div className=\"f5\">\n                        {quarantinedPersonName} has an ongoing exposure to{\" \"}\n                        {contagiousPersonName}{\" \"}\n                      </div>\n                    );\n                  } else {\n                    return (\n                      <div className=\"f5\">\n                        {quarantinedPersonName} exposed to{\" \"}\n                        {contagiousPersonName} at {event.date}\n                      </div>\n                    );\n                  }\n                }\n              }\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport {\n  CalculationResult,\n  CovidEventName,\n  InHouseExposureEvent,\n  PersonData\n} from \"./types\";\nimport Person from \"./Person\";\nimport { State } from \"@hookstate/core\";\nimport { computeHouseHoldQuarantinePeriod } from \"./calculator\";\nimport { format, isValid } from \"date-fns\";\n\ninterface Props {\n  addNewPerson: () => void;\n  membersState: State<PersonData[]>;\n  inHouseExposureEventsState: State<InHouseExposureEvent[]>;\n  editingState: State<number | undefined>;\n  editingDateFieldState: State<CovidEventName | undefined>;\n}\n\nexport default function Household(props: Props) {\n  const editing = props.editingState.get();\n  const members = props.membersState.get();\n  const inHouseExposureEvents = props.inHouseExposureEventsState.get();\n  return (\n    <>\n      <div className=\"p-3\">\n        {!editing && (\n          <button className=\"btn btn-primary mb-2\" onClick={props.addNewPerson}>\n            <i className=\"fa fa-user-plus\" aria-hidden=\"true\"></i> Add Person\n          </button>\n        )}\n        {props.membersState.map((personState: State<PersonData>) => {\n          const person = personState.get();\n          const id = person.id;\n          return (\n            <Person\n              key={id}\n              personState={personState}\n              membersState={props.membersState}\n              inHouseExposureEventsState={props.inHouseExposureEventsState}\n              editingState={props.editingState}\n              editingDateFieldState={props.editingDateFieldState}\n            />\n          );\n        })}\n        <hr />\n        <div className={\"p-1\"}>\n          <h4>Guidance</h4>\n          {computeHouseHoldQuarantinePeriod(members, inHouseExposureEvents).map(\n            (result: CalculationResult) => {\n              if (isValid(result.startDate) && isValid(result.endDate)) {\n                return (\n                  <div className=\"p32\">\n                    {result.person.name} {\" should quarantine from \"}{\" \"}\n                    {format(result.startDate, \"MM/dd/yyyy\")}\n                    {\" until \"} {format(result.endDate, \"MM/dd/yyyy\")}\n                    {\".\"}\n                  </div>\n                );\n              }\n            }\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n","import React from \"react\";\nimport { useState } from \"@hookstate/core\";\nimport GridView from \"./GridView\";\nimport Household from \"./Household\";\nimport { CovidEventName, InHouseExposureEvent, PersonData } from \"./types\";\nimport { compact } from \"lodash/fp\";\nimport { getRandomInt, isContagious } from \"./util\";\n\nexport default function App() {\n  const initialMembers: PersonData[] = [\n    {\n      id: 1,\n      name: `Alice`,\n      covidEvents: {\n        [CovidEventName.LastCloseContact]: \"8/25/2020\",\n        [CovidEventName.SymptomsStart]: \"\",\n        [CovidEventName.PositiveTest]: \"\"\n      },\n      noSymptomsFor24Hours: true,\n      isNewPerson: false,\n      editing: false\n    },\n    {\n      id: 2,\n      name: `Bob`,\n      covidEvents: {\n        [CovidEventName.LastCloseContact]: \"8/28/2020\",\n        [CovidEventName.SymptomsStart]: \"\",\n        [CovidEventName.PositiveTest]: \"\"\n      },\n      noSymptomsFor24Hours: true,\n      isNewPerson: false,\n      editing: false\n    }\n  ];\n  const members = useState(initialMembers);\n  const inHouseExposureEvents = useState<InHouseExposureEvent[]>([]);\n  const editing = useState<number | undefined>(undefined);\n  const id = useState(members.length + 1);\n  const editingDateField = useState<CovidEventName | undefined>(undefined);\n\n  function addNewPerson() {\n    const currentId = id.get();\n    const newPerson = {\n      id: currentId,\n      name: `Person ${getRandomInt(1000)}`,\n      covidEvents: {\n        [CovidEventName.LastCloseContact]: \"\",\n        [CovidEventName.SymptomsStart]: \"\",\n        [CovidEventName.PositiveTest]: \"\"\n      },\n      noSymptomsFor24Hours: true,\n      isNewPerson: true,\n      editing: true\n    };\n    id.set(id => id + 1);\n    members.set(members => [...members, newPerson]);\n    editing.set(currentId);\n    const newExposureEvents = members.get().map((person: PersonData) => {\n      if (isContagious(person)) {\n        return {\n          contagiousPerson: person.id,\n          quarantinedPerson: newPerson.id,\n          exposed: true,\n          ongoing: true,\n          date: \"\",\n          dateMissing: false,\n          dateInvalid: false\n        };\n      }\n    });\n    inHouseExposureEvents.merge(compact(newExposureEvents));\n  }\n\n  return (\n    <>\n      <div className=\"navbar navbar-dark bg-dark shadow-sm\">\n        <div className=\"container d-flex justify-content-between\">\n          <a href=\"#\" className=\"navbar-brand d-flex align-items-center\">\n            <strong>Covid Quarantine Calculator</strong>\n          </a>\n          <div className=\"white f7 fw5\">\n            This page is a work in progress. Its instructions may be incorrect.\n            Consult{\" \"}\n            <a href=\"https://multco.us/novel-coronavirus-covid-19/if-you-have-been-around-someone-covid-19\">\n              the MultCo website\n            </a>{\" \"}\n            or the latest CDC guildlines for accurate Covid information.{\" \"}\n          </div>\n        </div>\n      </div>\n      <main className={\"row\"}>\n        <div className={\"col-md-5\"}>\n          <Household\n            membersState={members}\n            inHouseExposureEventsState={inHouseExposureEvents}\n            editingState={editing}\n            editingDateFieldState={editingDateField}\n            addNewPerson={addNewPerson}\n          />\n        </div>\n        <div className={\"col-md-7\"}>\n          <GridView\n            membersState={members}\n            editing={editing.get()}\n            editingDateFieldState={editingDateField}\n            inHouseExposureEvents={inHouseExposureEvents.get()}\n          />\n        </div>\n      </main>\n    </>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}